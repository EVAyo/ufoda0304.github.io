(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-team-detail"],{1148:function(t,e,i){"use strict";var n=i("5926"),a=i("577e"),r=i("1d80"),s=RangeError;t.exports=function(t){var e=a(r(this)),i="",o=n(t);if(o<0||o==1/0)throw s("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},"190b":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3"),i("2ca0");var n={name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA:function(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created:function(){this._isH5=null},methods:{isMail:function(){return this.href.startsWith("mailto:")},isTel:function(){return this.href.startsWith("tel:")},openURL:function(){window.open(this.href)},makePhoneCall:function(t){uni.makePhoneCall({phoneNumber:t})}}};e.default=n},"24db":function(t,e,i){"use strict";i.r(e);var n=i("190b"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"32d0":function(t,e,i){var n=i("58dd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("5264f9cc",n,!0,{sourceMap:!1,shadowMode:!1})},"38cf":function(t,e,i){var n=i("23e7"),a=i("1148");n({target:"String",proto:!0},{repeat:a})},"58dd":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"\n.uni-link[data-v-03b6d5de]{cursor:pointer}\n.uni-link--withline[data-v-03b6d5de]{text-decoration:underline}",""]),t.exports=e},"69e1":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".js[data-v-3b70efae]{width:25%;background-color:#6a63ab}.js2[data-v-3b70efae]{width:5%;background-color:#6a63ab}.skills[data-v-3b70efae]{white-space:nowrap;\n\t\t/* overflow: ; */overflow:visible;text-overflow:ellipsis;font-size:14px;text-align:left;padding-left:5px;line-height:40px;color:#999}\n\n\t/* \t.swiper-item-bg {\n\t\tcolor: #7f858a;\n\t\tbackground-color: #fafafa;\n\t}\n */.example-body[data-v-3b70efae]{\ndisplay:flex;\nflex-direction:row;justify-content:flex-start;align-items:flex-end;flex-wrap:wrap}.tag-view[data-v-3b70efae]{margin-right:10px}.goods-carts[data-v-3b70efae]{\ndisplay:flex;\nflex-direction:column;position:fixed;left:0;right:0;\nleft:var(--window-left);right:var(--window-right);\nbottom:0;z-index:1000}",""]),t.exports=e},8026:function(t,e,i){"use strict";var n=i("c3c5"),a=i.n(n);a.a},"949d":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShowA?i("a",{staticClass:"uni-link",class:{"uni-link--withline":!0===t.showUnderLine||"true"===t.showUnderLine},style:{color:t.color,fontSize:t.fontSize+"px"},attrs:{href:t.href,download:t.download}},[t._t("default",[t._v(t._s(t.text))])],2):i("v-uni-text",{staticClass:"uni-link",class:{"uni-link--withline":!0===t.showUnderLine||"true"===t.showUnderLine},style:{color:t.color,fontSize:t.fontSize+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openURL.apply(void 0,arguments)}}},[t._t("default",[t._v(t._s(t.text))])],2)},a=[]},9952:function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getTeamData=function(e){var i=JSON.parse(JSON.stringify(e)),n={fire:0,rock:0,wind:0,ice:0,thunder:0,water:0},s=[],h={},v=[];for(var m in i.members){var g=i.members[m],p=(0,o.getPreset)(m);p.cNote?(g.title=p.cNote,g.note=p.eNote,g.title2=p.score,g.score=0,g.element=p.element,h[p.cId]=p,n[p.element]+=1):v.push(p)}if(i.presets=h,v.length>0)return t.log("needInit"),{needInit:!0,initPresets:v};var b={};for(var x in h){var k=h[x];if(k.effects){var w,y=(0,r.default)(k.effects);try{for(y.s();!(w=y.n()).done;){var S=w.value;b[S.id]=S}}catch(ut){y.e(ut)}finally{y.f()}}}n.fire>1&&s.push({id:"shuanghuo",title:"共鸣 - 双火",text:"攻击力提升25%"});n.ice>1&&(b.shuangbing={id:"shuangbing",title:"共鸣 - 双冰",text:"暴击率提升15%"});n.rock>1&&s.push({id:"shuangyan",title:"共鸣 - 双岩",text:"伤害提升15%,目标岩元素抗性降低15%"});n.ice>0&&n.thunder>0&&(b.chaodao={id:"chaodao",title:"效果 - 超导",text:"目标物理抗性降低40%"});i.score=0;var _,T=(0,r.default)(i.results);try{for(T.s();!(_=T.n()).done;){var I=_.value;I.score=0;var C,D=h[I.id],L=u.charactersData[I.id],$=L.cals[I.id],P=(0,r.default)(I.actions);try{for(P.s();!(C=P.n()).done;){var M=C.value,O=[],U=(0,a.default)({},D);M.type?(U.school.reaction=M.type,M.text=f[M.type]):(U.school={reaction:-1},M.text=""),U.tIds=i.cIds;var z=d(U,M,s,b);if(z.isTeam=!0,z.buffTexts&&(O=z.buffTexts),z.wBuff&&O.unshift(z.wBuff),z.aBuff&&O.unshift(z.aBuff),M.skills){M.skillKey||(M.skillKey=M.skills[0][0]);var F=0;if(M.skillIndex)F=cSkills[M.skillIndex];else{var N=U["cSkills"];F="q"==M.skillKey?N[2]:"e"==M.skillKey?N[1]:N[0]}for(var j=0,A=i.members[I.id],B=0;B<M.skills.length;B++){var E=M.skills[B],R=A.skill[E][F];M.repeat?j+=R*M.repeat[B]:j+=R}var K={element:M.element,title:M.title,key:M.skillKey,level:j};if(M.stage){var q,J=(0,r.default)(M.stage);try{for(J.s();!(q=J.n()).done;){var H=q.value;if(U.cStage>=H.num)switch(H.type){case"skill":for(var W=0;W<H.skills.length;W++){var G=H.skills[W],Q=A.skill[G][F];K.level+=Q*H.repeat[W]}break;case"bonus":K.bonus=H.value;break;default:break}}}catch(ut){J.e(ut)}finally{J.f()}}if(M.baseAction){var V=M.baseAction,X=(0,a.default)({},h[V.id]);X.tIds=i.cIds;var Y=d(X,V,s,b),Z=X.cSkills[V.skillIndex],tt=i.members[V.id],et=tt.skill[V.skillKey][Z];K.baseItem={atk:Y.atk(),ratio:et*V.repeat}}z.skills.push(K),$.get(z),M.score=z.tScore,M.formula=z.formula,M.extraNote&&O.unshift(M.extraNote)}else{var it=(0,l.reactionDamage)(z,M.reaction);M.score=it*M.repeat[0],M.formula=M.repeat[0]+" * "+z.formulaR}O.length>0?M.note=O.join(" | "):M.note="无";var nt=parseInt(M.score);I.score+=nt,i.members[I.id].score+=nt,M.text+=(1*M.score).toFixed(0)}}catch(ut){P.e(ut)}finally{P.f()}I.text=I.score.toFixed(0),i.score+=I.score}}catch(ut){T.e(ut)}finally{T.f()}for(var at in i.members){var rt=i.members[at],st=(rt.score/i.score*100).toFixed(0)+"%";rt.text=rt.score+" / "+st,rt.dps=(rt.score/i.time).toFixed(0)+" / S"}i.sText=i.score.toFixed(0);var ot=i.score/i.time;i.dps=ot.toFixed(0)+" / S";var ct=(ot/5e4*100).toFixed(0),lt=(0,c.getColor)(ct);return i.result.color=lt,i.result.score=ct,i};var a=n(i("5530")),r=n(i("b85c"));i("e9c4"),i("14d9"),i("3c65"),i("38cf"),i("e25e");var s=i("149f"),o=(i("433a"),i("fedd")),c=i("b209"),l=i("4d26"),u=i("4432"),f=["无","蒸发 - ","融化 - "];function d(t,e,i,n){var a,o,c=[];if(e.buffs){var l,u=(0,r.default)(e.buffs);try{for(u.s();!(l=u.n()).done;){var f=l.value,d=n[f];d&&c.push(d)}}catch(m){u.e(m)}finally{u.f()}}else e.buffs=[];if(e.aConfigs&&!t.aSets){var h=e.aConfigs[t.aIds[0]];h&&(a=h.indexs)}if(e.wConfigs){var v=e.wConfigs[t.wId];v&&(o=v.indexs)}return(0,s.buildTeamAttribute)(t,i,c,o,a)}}).call(this,i("5a52")["default"])},"9ddb":function(t,e,i){"use strict";i.r(e);var n=i("b89f"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},a1f1:function(t,e,i){"use strict";var n=i("32d0"),a=i.n(n);a.a},b89f:function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9"),i("4e82");var a=n(i("b85c")),r=n(i("5530")),s=i("26cb"),o=i("c670"),c=i("9952"),l=i("4432"),u=i("fedd"),f={data:function(){return{colors:{fire:"#fadbd9",ice:"#d2f1f0",rock:"#fef2ced2",water:"#cce6ff",thunder:"#e1d7f0",wind:"#d7f0dbff"},margin:"0px 15px 30px",notices:[],recharges:[],others:[],needInit:!1,initPresets:[],charactersData:{},formulaText:"基础区 * 增伤 * 期望 * 防御 * 反应 * 抗性 * 倍率",color:"rgb(211,159,81)",score:"",members:[],showSequence:!1,switchChecked:[!1,!1,!1,!1],switchChecked2:[!1,!1,!1,!1],presets:[],team:{},index:0,showRecharges:!1,showTeamBuffs:[],value:["0"],preset:{},options:[{icon:"star",text:"收藏"},{icon:"color",text:" 预设",info:0},{icon:"vip",text:"词条",info:0},{icon:"fire",text:"数据",info:0},{icon:"staff",text:"队友",info:0}]}},computed:(0,r.default)({},(0,s.mapState)(["version","character"])),onUnload:function(){uni.$off("presetChanged")},onLoad:function(t){var e=o.Teams[t.teamId];if(e){this.Team=e,this.charactersData=l.charactersData;var i=this;uni.$on("presetChanged",(function(){i.$store.commit("recoverPreset"),i.initData(),i.$forceUpdate()})),i.initData()}else uni.reLaunch({url:"/pages/team/team"})},methods:{initData:function(){if(uni.showLoading({title:"正在计算,请稍后!"}),this.members=[],this.team=(0,c.getTeamData)(this.Team),t.log("计算！"),this.team.needInit)return this.needInit=this.team.needInit,this.initPresets=this.team.initPresets,void uni.hideLoading();for(var e in this.needInit=!1,this.notices=[],this.recharges=[],this.others=[],this.team.members){var i,n=this.team.members[e],r=uni.getStorageSync(n.id),s=(0,a.default)(n.requires);try{for(s.s();!(i=s.n()).done;){var o=i.value,l=this.charactersData[r.cId].chs;switch(o.type){case 0:o.value>r.recharge&&(o.title=l,o.note="低于"+(100*o.value).toFixed(0)+"%",this.recharges.push(o));break;case 1:o.value>r.cStage&&(o.title=l,o.note="低于"+o.value+"命",this.notices.push(o));break;case 2:o.value==r.cStage&&(o.title=l,o.note="不支持"+o.value+"命",this.others.push(o));break;case 3:o.value<=r.cStage&&(o.title=l+" - 命座说明",this.notices.push(o));break;default:break}}}catch(d){s.e(d)}finally{s.f()}this.members.push(n)}this.members.sort((function(t,e){return e.score-t.score}));for(var u=0;u<this.members.length;u++){var f=this.members[u];f.width=0==u?90:f.score/this.members[0].score*90}uni.hideLoading(),this.$store.commit("setTeam",this.team),uni.setNavigationBarTitle({title:this.team.sTitle})},onClick:function(t){switch(t.index){case 0:uni.navigateTo({url:"config/actions"});break;default:break}},switchChange2:function(t){var e=this.switchChecked2[t];this.switchChecked2[t]=!e||!e,this.$forceUpdate()},switchChange:function(t){var e=this.switchChecked[t];this.switchChecked[t]=!e||!e,this.$forceUpdate()},setIndex:function(t){this.index=t},switchSequence:function(t){this.showSequence=t.value},switchRecharges:function(t){this.showRecharges=t.value},change:function(e){t.log(e)},toInit:function(t){var e=this;uni.showLoading({title:"初始化中..",mask:!0}),setTimeout((function(){(0,u.startCalculate)(t,this.version),e.$store.dispatch("storePreset",t),e.initData(),uni.hideLoading()}),3e3)},toAction:function(t){uni.navigateTo({url:"./action?index="+t})},toDetail:function(t){var e=uni.getStorageSync(t);this.$store.commit("backupPreset"),this.$store.commit("setPreset",e),uni.navigateTo({url:"../character/property?from=team"})}}};e.default=f}).call(this,i("5a52")["default"])},bfb4:function(t,e,i){"use strict";i.r(e);var n=i("949d"),a=i("24db");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("a1f1");var s=i("f0c5"),o=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"03b6d5de",null,!1,n["a"],void 0);e["default"]=o.exports},c3c5:function(t,e,i){var n=i("69e1");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2a29d963",n,!0,{sourceMap:!1,shadowMode:!1})},d7a4:function(t,e,i){"use strict";i.r(e);var n=i("f8d3"),a=i("9ddb");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("8026");var s=i("f0c5"),o=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"3b70efae",null,!1,n["a"],void 0);e["default"]=o.exports},f8d3:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={uniCard:i("3d92").default,uniListItem:i("6e18").default,uniLink:i("bfb4").default,uniSection:i("89d3").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.needInit?t._l(t.initPresets,(function(e,n){return i("uni-card",{key:n,attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-list-item",{attrs:{"thumb-size":"lg",clickable:!0,thumb:t.charactersData[e.cId].avatar,title:"该角色未初始化，无法进行计算..",rightText:"配置",showArrow:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toInit(e)}}})],1)})):i("v-uni-view",[i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-list-item",{staticClass:"item-space",attrs:{title:"1、原作者 "+t.team.from.name},scopedSlots:t._u([{key:"footer",fn:function(){return[i("uni-link",{attrs:{color:"#007AFF",href:t.team.from.url,text:"地址"}})]},proxy:!0}],null,!1,1157944898)}),i("uni-list-item",{staticClass:"item-space",attrs:{title:"2、注意：如果装备了和原作者不同的条件触发型武器或圣遗物，将会影响伤害的计算，原因是没有具体覆盖情况，因此将会忽略处理（会按照角色设置的选项算），各位如果能提供相关覆盖情况，可以和我联系补充完善该轴。"}})],1),i("uni-card",{attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:"伤害分析",type:"line",rightText:t.team.dps}},[i("uni-list-item",{attrs:{showBadge:!0,title:"总伤害",rightText:t.team.sText+" / 100%",clickable:!0},scopedSlots:t._u([{key:"header",fn:function(){return[i("v-uni-view",{staticClass:"cu-avatar",style:{backgroundColor:t.team.result.color}},[t._v(t._s(t.team.result.score))])]},proxy:!0}],null,!1,1238893863)}),t._l(t.members,(function(e,n){return i("uni-list-item",{key:n,attrs:{clickable:!0,"thumb-size":"lg",thumb:t.charactersData[e.id].avatar,title:e.title2,rightText:e.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDetail(e.id)}}})}))],2)],1),t.notices.length>0?i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"计算说明",type:"line",rightText:"影响伤害计算"}}),i("v-uni-view",t._l(t.notices,(function(t,e){return i("uni-list-item",{key:e,attrs:{title:t.title,rightText:t.note}})})),1)],1):t._e(),t.recharges.length>0?i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"充能要求",type:"line",rightText:"可能影响循环"}}),i("v-uni-view",t._l(t.recharges,(function(t,e){return i("uni-list-item",{key:e,attrs:{title:t.title,rightText:t.note}})})),1)],1):t._e(),t.others.length>0?i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"忽视计算",type:"line",rightText:"计算时会忽略"}}),i("v-uni-view",t._l(t.others,(function(t,e){return i("uni-list-item",{key:e,attrs:{title:t.title,rightText:t.note}})})),1)],1):t._e(),i("uni-card",{key:t.index,attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:"技能轴",type:"line",rightText:t.team.note}}),t._l(t.team.results,(function(e,n){return i("uni-list-item",{key:n,attrs:{clickable:!0,"thumb-size":"lg",thumb:t.charactersData[e.id].avatar,title:e.title,note:e.note,rightText:e.text},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAction(n)}}})}))],2)],1),i("v-uni-view",{staticStyle:{height:"60px"}})],2)},r=[]}}]);