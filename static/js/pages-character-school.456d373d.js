(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-character-school"],{"00d0":function(t,e,a){"use strict";var r=a("4ea4");a("99af"),a("caad"),a("4e82"),a("2532"),Object.defineProperty(e,"__esModule",{value:!0}),e.maximize=u;var n=r(a("b85c")),o=r(a("5530"));function i(t,e,a){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n={},i=0,s=["cr","cd","atk","em","hp","def","er"],c={},l=0,u=0,d=s.length-1;d>=0;--d)c[s[d]]=[l,u],l+=a[s[d]][0],u+=a[s[d]][1];function f(e,l){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,v=s[u];if(u==s.length-1){if(l+d>41)return;e[v]=l;var g=t(e);g>i&&(i=g,n=(0,o.default)({},e))}else for(var p=Math.max(a[v][0],l-c[v][1]),h=Math.min(a[v][1],l-c[v][0],41-d),x=p;x<=h;x+=r)e[v]=x,f(e,l-x,u+1,Math.max(d,x))}return e=Math.floor(e),f({},e),{statBest:n,dmgBest:i}}function s(t,e,a){var r=i(t,e,a,2),n=r.statBest,o=(r.dmgBest,{});for(var s in a)o[s]=[a[s][0],a[s][1]],s in n&&(o[s][0]=Math.max(o[s][0],n[s]-3),o[s][1]=Math.min(o[s][1],n[s]+3));return i(t,e,o)}function c(t,e,a){var r=.1,n=2e3,o=1e-5,i=1e-5,s=1,c=2,l=-.5,u=.5;function d(e){var r=[];for(var n in e){if(n in a&&(e[n]<a[n][0]||e[n]>a[n][1]))return 0;e[n]>0&&r.push(e[n])}return r.sort((function(t,e){return e-t})),r.length>=2&&r[0]+r[1]>41?0:t(e)}var f=0,v=[],g=0,p=0,h=[];for(var x in a)if(g+=a[x][0],a[x][0]<a[x][1]){f++,v.push(x);var b=Math.random();p+=b*(a[x][1]-a[x][0]),h.push(b)}for(var m=[],S=0;S<v.length;++S){var _=v[S],w=(e-g)/(p+r*h[S]*(a[_][1]-a[_][0])),y={};for(var N in a)y[N]=a[N][0];for(var T=0;T<v.length;++T){var M=v[T],C=a[M][1]-a[M][0];y[M]+=w*h[T]*C,M==_&&(y[M]+=r*w*h[T]*C)}m.push({stat:y,dmg:d(y)})}function E(){m.sort((function(t,e){return e.dmg-t.dmg}))}function A(t,e,r,n){var o={stat:{},dmg:0};for(var i in a)o.stat[i]=t*e.stat[i]+r*n.stat[i];return o.dmg=d(o.stat),o}for(var R=0;R<n;++R){E();var D=0;for(var O in a)D=Math.max(D,Math.abs(m[0].stat[O]-m[1].stat[O]));if(Math.abs(m[0].dmg-m[f-1].dmg)<i&&D<o)break;var I={stat:{},dmg:0};for(var k in a){I.stat[k]=0;for(var P=0;P<f-1;++P)I.stat[k]+=m[P].stat[k];I.stat[k]/=f-1}var B=m[f-1],J=A(1+s,I,-s,B);if(J.dmg>m[0].dmg){var F=A(1+c,I,-c,B);F.dmg>J.dmg?m[f-1]=F:m[f-1]=J}else if(J.dmg<=m[f-1].dmg){var j=!1;if(J.dmg<B.dmg){var H=A(1+l,I,-l,B);H.dmg>B.dmg?m[f-1]=H:j=!0}else{var L=A(1-l*s,I,l*s,B);L.dmg>J.dmg?m[f-1]=L:j=!0}if(j){if(u>=1)break;for(var U=1;U<f;++U)m[U]=A(1-u,m[0],u,m[U])}}else m[f-1]=J}return E(),{statBest:m[0].stat,dmgBest:m[0].dmg}}function l(t,e,a){for(var r=5,n=c(t,e,a),o=n.statBest,s=n.dmgBest,l=1;l<r;++l){var u=c(t,e,a);u.dmgBest>s&&(o=u.statBest,s=u.dmgBest)}var d={};for(var f in a)d[f]=[a[f][0],a[f][1]],f in o&&(d[f][0]=Math.max(d[f][0],Math.ceil(o[f]-3)),d[f][1]=Math.min(d[f][1],Math.floor(o[f]+3)));return i(t,e,d)}function u(t,e,a,r,o){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Brute",d={atk:[0,37],hp:[0,37],def:[0,37],em:[0,35],er:[0,35],cr:[0,35],cd:[0,35]};if(a){if(a.length>3)throw new Error("主词条列表长度不超过3，得到"+a.length);var f,v=(0,n.default)(a);try{for(v.s();!(f=v.n()).done;){var g=f.value;g in d&&(["atk","hp","def"].includes(g)?d[g][1]-=5:d[g][1]-=7)}}catch(C){v.e(C)}finally{v.f()}}if(o)for(var p in d)if(p in o&&(d[p][0]=Math.max(d[p][0],Math.ceil(o[p][0])),d[p][1]=Math.min(d[p][1],Math.floor(o[p][1])),d[p][0]>d[p][1]))throw new Error("".concat(p,"的实际取值范围无效：[").concat(d[p][0],", ").concat(d[p][1],"]"));if(r)for(var h in d)r.includes(h)||(d[h][1]=d[h][0]);var x=[],b=0,m=0;for(var S in d)d[S][0]<d[S][1]&&x.push(S),b+=d[S][0],m+=d[S][1];if(e<b||e>m)throw new Error("没有可行解，因为".concat(e,"不在[").concat(b,", ").concat(m,"]内"));if(x.length<=1){var _={};for(var w in d)_[w]=Math.min(e-b+d[w][0],d[w][1]);return{statBest:_,dmgBest:t(_)}}if(e==b){var y={};for(var N in d)y[N]=d[N][0];return{statBest:y,dmgBest:t(y)}}if(e==m){var T={};for(var M in d)T[M]=d[M][1];return{statBest:T,dmgBest:t(T)}}switch(u){case"Brute":return i(t,e,d);case"BruteTwice":return s(t,e,d);case"NelderMead":return c(t,e,d);case"NelderMeadBrute":return l(t,e,d);default:throw new Error("未知的优化方法："+u)}}},"03ea":function(t,e,a){"use strict";var r=a("4ea4");a("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.getTag=d;var n=r(a("5530")),o=r(a("b85c")),i=a("175e"),s=["生","攻","防","精","暴","爆","充"],c=[["生命沙","攻击沙","防御沙","精通沙","充能沙"],["生命杯","攻击杯","防御杯","精通杯","元素杯","物理杯","火伤杯","冰伤杯","水伤杯","雷伤杯","草伤杯","岩伤杯","风伤杯"],["生命头","攻击头","防御头","精通头","暴击头","爆伤头","治疗头"]],l={fire:6,ice:7,water:8,thunder:9,grass:10,rock:11,wind:12},u={fire:"火伤",water:"水伤",thunder:"雷伤",ice:"冰伤",rock:"岩伤",wind:"风伤",grass:"草伤"};function d(t){var e,a=t.preset,r={},d=[],f=t.preset.tagNum,v=a.cPanel["HP"][0],g=a.cPanel["ATTACK"][0],p=a.cPanel["DEFENSE"][0],h=a.output,x=[],b=[],m=t.calculator.convert;if(t.convertTag=[],m){var S=JSON.parse(JSON.stringify(a));S.aMinor=[0,0,0,0,0,0,0,0],t.convertPresets=[S]}for(var _=0;_<h.length;_++){var w,y="",N=0,T=h[_],M=(0,o.default)(T);try{for(M.s();!(w=M.n()).done;){var C=w.value;if(0==_){var E=0,A="";switch(C){case 0:E=.05*v,A="词条 - 生命（ +5% / "+E.toFixed(0)+" ）";break;case 1:E=.05*g,A="词条 - 攻击（ +5% / "+E.toFixed(0)+" ）";break;case 2:E=.062*p,A="词条 - 防御（ +6.2% / "+E.toFixed(0)+" ）";break;case 3:E=20,A="词条 - 精通（ +20 ）";break;case 4:E=3.3,A="词条 - 暴击（ +3.3% ）";break;case 5:E=6.6,A="词条 - 爆伤（ +6.6% ）";break;case 6:E=5.5,A="词条 - 充能（ +5.5% ）";break;default:break}var R={title:A,note:"",text:0};x.push(R);var D=JSON.parse(JSON.stringify(a));if(D.aMinor[C]+=E,m){var O=m.indexOf(C);if(O>-1){var I=JSON.parse(JSON.stringify(t.convertPresets[0]));I.aMinor[C]+=E,t.convertPresets.push(I),t.convertTag.push(f[C])}}b.push(D)}y+=s[C],N+=f[C]}}catch(Tt){M.e(Tt)}finally{M.f()}var k={title:y,text:N.toFixed(1)};0==_?r=(0,n.default)({},k):d.push(k)}if(a.cLevel<90){var P=JSON.parse(JSON.stringify(a));P.cLevel=90;var B={character:t.character,preset:P,weapon:t.weapon};(0,i.getBaseData)(B),b.push(P),x.push({title:"人物 - 等级（ +"+(90-a.cLevel)+"级 ）",note:"",text:0})}if(a.wLevel<90){var J=JSON.parse(JSON.stringify(a));J.wLevel=90;var F={character:t.character,preset:J,weapon:t.weapon};(0,i.getBaseData)(F),b.push(J),x.push({title:"武器 - 等级（ +"+(90-a.wLevel)+"级 ）",note:"",text:0})}var j=null!==(e=t.calculator.skillKey)&&void 0!==e?e:t.character.skillKey;if(j){var H=[9,9];a.cStage>2&&(H=[12,12],a.cStage<5&&(t.character.isSkillFive?H[0]=9:H[1]=9));var L,U=[{key:"技能 - A（ +1级 ）",index:0,max:9},{key:"技能 - E（ +1级 ）",index:1,max:H[0]},{key:"技能 - Q（ +1级 ）",index:2,max:H[0]}],G=[],K=(0,o.default)(j);try{for(K.s();!(L=K.n()).done;){var $=L.value,z=a.cSkills[$],W=U[$];0==$&&z<W.max&&G.push(W),0!=$&&z<W.max&&G.push(W)}}catch(Tt){K.e(Tt)}finally{K.f()}for(var Y=0,q=G;Y<q.length;Y++){var Q=q[Y],V=JSON.parse(JSON.stringify(a));V.cSkills[Q.index]+=1,b.push(V),x.push({title:Q.key,note:"",text:0})}}if(h[0].indexOf(5)>-1||t.calculator.convert){var X=JSON.parse(JSON.stringify(a));if(b.push(X),x.push({title:"其他 - 伤害加成（ +5% ）",note:"",isBonus:!0,text:0}),a.aMajor[1]<6||a.aMajor[1]==l[a.element]){var Z=a.aMajor[1],tt=t.calculator.preset?t.calculator.preset.aMajor:t.character.preset.aMajor,et=["HP","ATTACK","DEFENSE"];if(Z<3){var at=JSON.parse(JSON.stringify(a)),rt="（ 元素杯 ）",nt=4;5==tt[1]&&(rt="（ 物理杯 ）",nt=5);var ot=.466;2==Z&&(ot=.583),at.aMajor[1]=nt,(0,i.getMajorData)(at),at.aMinor[Z]-=ot*at.cPanel[et[Z]][0],b.push(at),x.push({title:"更换 - "+c[1][Z]+rt,note:"",text:0})}else if(3!=Z){var it=JSON.parse(JSON.stringify(a)),st="更换 - 元素杯";5==Z&&(st="更换 - 物理杯");var ct=.466,lt="（ 攻击杯 ）";Z=1,2==tt[0]?(ct=.583,lt="（ 防御杯 ）",Z=2):0==tt[0]&&(lt="（ 生命杯 ）",Z=0),it.aMajor[1]=Z,(0,i.getMajorData)(it),it.aMinor[Z]+=ct*it.cPanel[et[Z]][0],b.push(it),x.push({title:st+lt,note:"",text:0})}}}var ut=[20,20,20,20,20],dt=[];if(a.aConfigs){for(_=0;_<a.aConfigs.length;_++){var ft=a.aConfigs[_];ut[_]=20-ft[1]}ut[0]<20&&dt.push(ut[0]+"花"),ut[1]<20&&dt.push(ut[1]+"羽")}for(_=0;_<3;_++){var vt=a.aMajor[_];if(vt<99){var gt="";gt=1==_&&4==vt?u[a.element]+"杯":c[_][vt],ut[_+2]<20&&(gt=ut[_+2]+gt),dt.push(gt)}else dt.push("无")}var pt=dt.join(" / ");r.content=pt;var ht=[],xt=[],bt=[];t.presets=b;for(_=0;_<s.length;_++){var mt=f[_].toFixed(1),St=s[_]+mt,_t=h[0].indexOf(_);if(_t>-1){ht.push(St);var wt=a.aMinor[_].toFixed(0)+s[_];bt[_t]=wt}else xt.push(St)}var yt={title:"主要词条",text:ht.join(" / ")};d.push(yt);var Nt={title:"其他词条",text:xt.join(" / ")};d.push(Nt),h[0].indexOf(5)>-1?r.note="双爆: "+(2*a.aMinor[4]+a.aMinor[5]).toFixed(1):r.note="",a.tPanel=bt.join(" / "),a.tResult=r,a.tResults=d,t.weights=x}},"0b7e":function(t,e,a){"use strict";(function(t){var r=a("4ea4");a("99af"),a("c975"),a("d81d"),a("fb6a"),a("4e82"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.getBaseScore=f,e.getTagScore=v,e.getDataScore=g,e.getGroupScore=p,e.getWeightScore=h,e.getGWeightScore=x,e.getPanel=b;var n=r(a("b85c")),o=a("149f"),i=a("175e"),s=a("7a53"),c=a("03ea"),l=a("b209"),u=a("e194"),d=a("0d89");function f(e){var a=e.preset,r=e.calculator.preset?e.calculator.preset:e.character.preset;e.oldPreset=r;var n=JSON.parse(JSON.stringify(r)),c=[8,8,8];4==e.character.star?(c=[8,11,11],n.cStage=6):n.cStage=0,n.cSkills=c,n.cLevel=90,n.wLevel=90,n.school=a.school,n.cId=a.cId,n.wType=a.wType,n.element=a.element,n.energy=a.energy,n.cPanel={HP:[0,4780],HP_PERCENT:[0,0],ATTACK:[0,311],ATTACK_PERCENT:[0,0],DEFENSE:[0,0],DEFENSE_PERCENT:[0,0],FIRE_ADD_HURT:[0,0],ICE_ADD_HURT:[0,0],ROCK_ADD_HURT:[0,0],ELEC_ADD_HURT:[0,0],WIND_ADD_HURT:[0,0],WATER_ADD_HURT:[0,0],PHYSICAL_ADD_HURT:[0,0],HEAL_ADD:[0,0],ELEMENT_MASTERY:[0,0],CRITICAL:[0,0],CRITICAL_HURT:[0,0],CHARGE_EFFICIENCY:[0,0]};var l=d.weaponsData[n.wId];if(n.wStage=5==l.star?0:4,n.wIndexs||(n.wIndexs=l.indexs),!n.aIndexs&&!n.aSets){var f=u.artifactsData[n.aIds[0]];f&&(n.aIndexs=f.indexs)}var v={character:e.character,preset:n,weapon:l};(0,i.getMajorData)(n),(0,i.getBaseData)(v),n.aTagToMinor=!0,n.tagNum=JSON.parse(JSON.stringify(a.school.tagNum)),(0,s.convertMinor)(n);var g=(0,o.buildAttribute)(n);a.output[0].indexOf(5)>-1&&(g.isBalance=!0),g.onlyScore=!0,e.calculator.get(g),e.baseScore=g.score,t.log("-------------"+e.character.chs+"-------------"),t.log("(1) C期望（默认圣遗物+默认配置）："+g.score)}function v(e){var a=e.preset,r=JSON.parse(JSON.stringify(a));r.aConfigs=null,r.aTagToMinor=!0;var n=null;"xiangling"==r.cId&&(n=[3,800]);var u=e.dataScore;if(n){var d=JSON.parse(JSON.stringify(a)),f=(0,o.buildAttribute)(d);f.onlyScore=!0,f.attackStatic+=n[1],f.em+=n[0],e.calculator.get(f),u=f.score,t.log(u)}var v=JSON.parse(JSON.stringify(r)),g=JSON.parse(JSON.stringify(a.school.tagNum)),p=g.map((function(t){return Math.round(5*t/3)}));v.tagNum=p,r.tagNum=g;var h=JSON.parse(JSON.stringify(r));r.aMajor=e.oldPreset.aMajor,(0,i.getMajorData)(r),(0,s.convertMinor)(r),(0,s.convertMinor)(h),(0,s.convertMinor)(v);var x=(0,o.buildAttribute)(v);n&&(x.attackStatic+=n[1],x.em+=n[0]),x.onlyScore=!0;var b=(0,o.buildAttribute)(h);n&&(b.attackStatic+=n[1],b.em+=n[0]),b.onlyScore=!0;var m=(0,o.buildAttribute)(r);m.onlyScore=!0,n&&(m.attackStatic+=n[1],m.em+=n[0]),a.output[0].indexOf(5)>-1?(m.isBalance=!0,x.isBalance=!0,b.isBalance=!0):(m.isBalance=!1,x.isBalance=!1,b.isBalance=!1),e.calculator.get(m);var S=m.score;t.log("(4) B期望（默认圣遗物+当前配置）："+S),e.calculator.get(b);var _=b.score;t.log("(5) D期望（默认词条数）："+_),e.calculator.get(x);var w=x.score;t.log("(6) E期望（极限词条数）："+w);var y=(w-_)/50,N=(u-_)/y+100,T=u/_*100,M=u/S*100,C=u/w*100;t.log("新算法1："+T.toFixed(0)),t.log("新算法2："+N.toFixed(0)),a.output[0].indexOf(5)>-1?a.tProgress=C.toFixed(0):a.tProgress=null,(0,c.getTag)(e);var E=M.toFixed(0),A=(0,l.getColor)(E);a.tResult.score=E,a.tResult.color=A,e.tagScore=S,a.score=e.supportScore?e.supportScore:a.tResult.score+" / "+a.dResult.score}function g(e){var a=e.preset,r=(0,o.buildAttribute)(a);e.attribute=r,r.isData=!0,e.calculator.get(r),a.dResult=r.result,a.dResults=r.results;var i=r.score;t.log("(3) A期望（当前圣遗物+当前配置）："+i),r.reacResult&&a.dResults.push(r.reacResult);var s=e.baseScore,c=(i/s*100).toFixed(0),d=(0,l.getColor)(c);a.dResult.score=c,a.dResult.color=d,e.dataScore=i,a.recharge=r.recharge;var f=e.baseData;r.dBuffs=f.concat(r.dBuffs),a.dBuffs=r.dBuffs,a.effects=r.effects;var v="",g=e.weapon.options;if(g){var p=a.wIndexs;if(p&&p[0]>0){v+="[";for(var h=0;h<p.length;h++){var x=p[h];v+=g[h][x]}v+="]"}}var m,S="",_=" ",w=(0,n.default)(a.cSkills);try{for(w.s();!(m=w.n()).done;){var y=m.value;_+=y+1}}catch(L){w.e(L)}finally{w.f()}var N="",T=u.artifactsData[a.aIds[0]];if(a.aSets){var M=u.artifactsData[a.aIds[1]];N=T.short[0]+M.short[0]+"二"}else{N=T.short+"四";var C=T.options;if(C){var E=a.aIndexs;if(E&&E[0]>0){S+="[";for(h=0;h<E.length;h++){var A=E[h];S+=C[h][A]}S+="]"}}}var R=e.weapon.chs.slice(0,2),D="";a.wLevel&&a.wLevel<90&&(D=a.wLevel,a.wAscend&&(D+="+"));var O=a.cLevel;a.cAscend?O+="+":O+="级";var I=O+" / "+a.cStage+"命 / 技能"+_,k=D+R+(a.wStage+1)+" / "+N;if(a.cNote=I,a.eNote=k,a.wNote=v,a.aNote=S,a.note=k+S+" / "+O+a.cStage+" /"+_,a.reactionText=r.reactionText?r.reactionText+" ":"",a.cData={em:r.em},e.preset.school.score||(e.supportScore=r.supportScore),r.isBalance)a.aMinor[4]+=r.resetCD.diffC,a.aMinor[5]+=r.resetCD.diffD,a.tagNum[4]=(a.aMinor[4]-100*a.cPanel["CRITICAL"][1])/3.3,a.tagNum[5]=(a.aMinor[5]-100*a.cPanel["CRITICAL_HURT"][1])/6.6,a.isAdapt=!1;else{var P=0;if(a.output[0].indexOf(5)>-1){var B=100*r.critical,J=100*r.criticalDamage;if(B<100)if(B*J<2e4){var F=Math.sqrt(8*B*J);P=(2*B+J-F)/6.6}else P=(2*B+J-200-B*J/100)/6.6;else if(J>200)P=(B-100)/3.3;else{var j=Math.sqrt(800*J);P=(2*B+J-j)/6.6}a.tLost=P.toFixed(1)}else a.tLost=null}var H=b(e);a.dPanel=H}function p(e){var a=e.preset;if(a.gIds&&a.gIds[1]){var r=(0,o.buildGroupAttribute)(a);e.attribute=r,e.calculator.get(r),a.gResult=r.result,a.gResults=r.results;var n=a.gResult.text;t.log("(2) E期望（+队伍增益）："+r.score),r.reacResult&&a.gResults.push(r.reacResult);var i=b(e);a.gPanel=i,a.gBuffs=r.gBuffs;var s=e.baseScore,c=(n/s*100).toFixed(0);a.gResult.score=c,a.gResult.color=(0,l.getColor)(c),a.groupScore=n}else a.gResult=null,a.gResults=null,a.gWeights=null,a.groupScore=null}function h(t){for(var e=t.preset,a=JSON.parse(JSON.stringify(t.weights)),r=[],n=0;n<a.length;n++){var i=a[n],s=t.presets[n],c=(0,o.buildAttribute)(s);c.onlyScore=!0,i.isBonus&&(c.bonus+=.05),t.calculator.get(c);var l=100*(c.score/t.dataScore-1);l>.05&&(i.text=l.toFixed(2),r.push(i))}if(t.calculator.convert){var u=Number(t.preset.tResult.text),d=(0,o.buildAttribute)(t.convertPresets[0]);d.onlyScore=!0,t.calculator.get(d);var f=d.score,v=(0,o.buildAttribute)(t.convertPresets[1]);v.onlyScore=!0,t.calculator.get(v);var g=v.score,p=(0,o.buildAttribute)(t.convertPresets[2]);p.onlyScore=!0,t.calculator.get(p);var h=p.score,x=100*(g/f-1),b=100*(h/f-1),m=[x,b],S=0,_=1;x>b&&(S=1,_=0);var w=t.convertTag[S]*(m[S]/m[_]-1),y=u+w;"shanhugongxinhai"!=t.preset.cId?t.preset.tResult.note+=" | ":t.preset.tResult.note="",t.preset.tResult.note+="词条："+t.preset.tResult.text,t.preset.tResult.text=y.toFixed(1),t.preset.tResult.rightText="折算 "+y.toFixed(1)}else t.preset.tResult.rightText="词条 "+t.preset.tResult.text;r.sort((function(t,e){return e.text-t.text})),e.weights=r}function x(t){for(var e=t.preset,a=JSON.parse(JSON.stringify(t.weights)),r=[],n=0;n<a.length;n++){var i=a[n],s=t.presets[n],c=(0,o.buildGroupAttribute)(s);c.onlyScore=!0,i.isBonus&&(c.bonus+=.05),t.calculator.get(c);var l=100*(c.score/t.preset.groupScore-1);l>.05&&(i.text=l.toFixed(2),r.push(i))}r.sort((function(t,e){return e.text-t.text})),e.gWeights=r}function b(t){var e,a=t.attribute,r=t.preset.output,o=!0,i=[],s=(0,n.default)(r[0]);try{for(s.s();!(e=s.n()).done;){var c=e.value;6==c&&(o=!1);var l=0,u="";switch(c){case 0:l=a.life().toFixed(0),u="生";break;case 1:l=a.atk().toFixed(0),u="攻";break;case 2:l=a.defend().toFixed(0),u="防";break;case 3:l=(100*a.em).toFixed(0),u="精";break;case 4:l=(100*a.critical).toFixed(0),u="暴";break;case 5:l=(100*a.criticalDamage).toFixed(0),u="爆";break;case 6:l=(100*a.recharge).toFixed(0),u="充";break;default:break}i.push(l+u)}}catch(v){s.e(v)}finally{s.f()}a.recharge>1&&o&&i.push((100*a.recharge).toFixed(0)+"充");var d=i.join(" / "),f=d;return f}}).call(this,a("5a52")["default"])},"1dfd":function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,".content[data-v-d83b913c]{\n\t\t/* height: 50px; */width:100%;max-width:500px;position:relative;display:block;margin-left:auto;margin-right:auto;box-sizing:border-box;font-size:18px;text-align:center;text-decoration:none;line-height:3;color:#fff\n\t\t/* background-color: #ad9388; */}.bottom-view[data-v-d83b913c]{\n\t\t/* background-color: #ad9388; */height:calc(env(safe-area-inset-bottom)/2)}\n\n\t/* \t.height-set {\n\n\t\theight: 100px;\n\t} */.button-bottom-view[data-v-d83b913c]{\n\t\t/* background-color: #ad9388; */display:flex;flex-direction:column;position:fixed;left:0;right:0;\nleft:var(--window-left);right:var(--window-right);\nbottom:0;z-index:998}",""]),t.exports=e},"2c73":function(t,e,a){var r=a("f253");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("4f06").default;n("01a61e02",r,!0,{sourceMap:!1,shadowMode:!1})},3621:function(t,e,a){"use strict";a.r(e);var r=a("6689"),n=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);e["default"]=n.a},"3d37":function(t,e,a){"use strict";a.r(e);var r=a("444b"),n=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);e["default"]=n.a},"444b":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={props:{text:{type:String,default:"保存"},color:{type:String,default:"#ad9388"}},data:function(){return{}},methods:{onClick:function(){this.$emit("click",{data:{}})}}};e.default=r},5561:function(t,e,a){"use strict";var r=a("2c73"),n=a.n(r);n.a},6689:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"UniSection",emits:["click"],props:{showArrow:{type:[Boolean,String],default:!1},rightText:{type:[String,Object],default:""},type:{type:String,default:""},title:{type:String,default:""},color:{type:String,default:"#f6f2ee"},subTitle:{type:String,default:""},padding:{type:Boolean,default:!1}},data:function(){return{}},watch:{title:function(t){uni.report&&""!==t&&uni.report("title",t)}},methods:{onClick:function(){this.$emit("click")}}};e.default=r},"748d":function(t,e,a){"use strict";var r;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticStyle:{height:"100px"}}),a("v-uni-view",{staticClass:"button-bottom-view",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"content",style:{backgroundColor:t.color}},[t._v(t._s(t.text))]),a("v-uni-view",{staticClass:"bottom-view",style:{backgroundColor:t.color}})],1)],1)},o=[]},"7aec":function(t,e,a){"use strict";var r=a("f86f"),n=a.n(r);n.a},"7ce9":function(t,e,a){"use strict";a.r(e);var r=a("d818"),n=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);e["default"]=n.a},"89d3":function(t,e,a){"use strict";a.r(e);var r=a("971c"),n=a("3621");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("7aec");var i,s=a("f0c5"),c=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"c5b075ba",null,!1,r["a"],i);e["default"]=c.exports},"903e":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r}));var r={uniSection:a("89d3").default,uniListItem:a("6e18").default,buttonBarBottom:a("e265").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.index<99,expression:"index<99"}]},[a("uni-section",{attrs:{title:"展示柜说明",type:"line"}}),a("v-uni-view",{staticClass:"note-text"},[a("v-uni-view",[t._v("1、展示柜的属性为只读，只能修改流派和增幅，其他属性无法修改，如果需要调整，可以在详情页下方点击【复制配置到本地】，再从首页进入角色修改")]),a("v-uni-view",[t._v("2、如果发现数据读取有误，先尝试刷新一下展示柜，还是无法解决大概率是BUG，可以把错误情况进行反馈")])],1)],1),a("uni-section",{attrs:{title:"流派",type:"line"}},[a("v-uni-radio-group",[a("v-uni-view",{staticClass:"uni-list"},t._l(t.schoolArr,(function(e,r){return a("uni-list-item",{key:e.name,attrs:{title:e.name,clickable:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectSchoolIndex(r)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("v-uni-radio",{attrs:{color:"#ad9388",checked:r==t.schoolIndex}})]},proxy:!0}],null,!0)})})),1)],1)],1),a("button-bar-bottom",{attrs:{text:"保存"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save()}}})],1)},o=[]},"971c":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r}));var r={uniIcons:a("fcef").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-section",style:{backgroundColor:t.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-section-header",attrs:{nvue:!0}},[t.type?a("v-uni-view",{staticClass:"uni-section__head"},[a("v-uni-view",{staticClass:"uni-section__head-tag",class:t.type})],1):t._e(),a("v-uni-view",{staticClass:"uni-list-item__content"},[t.title?a("v-uni-text",{staticClass:"uni-list-item__content-title"},[t._v(t._s(t.title))]):t._e(),t.subTitle?a("v-uni-text",{staticClass:"uni-list-item__content-note"},[t._v(t._s(t.subTitle))]):t._e()],1),a("v-uni-view",{staticClass:"uni-section__content__extra"},[t._t("extra",[t.rightText?a("v-uni-text",{staticClass:"uni-list-item__extra-text"},[t._v(t._s(t.rightText))]):t._e()])],2),t.showArrow?a("uni-icons",{staticClass:"uni-icon-wrapper",attrs:{size:14,type:"arrowright"}}):t._e()],1),a("v-uni-view",{style:{padding:t.padding?"10px":""}},[t._t("default")],2)],1)},o=[]},aade:function(t,e,a){"use strict";(function(t){var r=a("4ea4");a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.getBestTag=i;var n=r(a("b85c")),o=a("149f");function i(e){var r,i=e.preset,s=Number(i.adapt.total),c=["hp","atk","def","em","cr","cd","er","cu","eb","eb"],l=["eb"],u=[],d=(0,n.default)(i.output[0]);try{for(d.s();!(r=d.n()).done;){var f=r.value;u.push(c[f])}}catch(N){d.e(N)}finally{d.f()}var v=a("00d0"),g={},p=["BruteTwice","NelderMeadBrute","Brute"],h=i.adapt.method;t.log(i.cPanel);for(var x=0;x<i.adapt.min.length;x++){var b=i.adapt.min[x];b&&b>0&&(g[c[x]]=[b,100])}var m=JSON.parse(JSON.stringify(i));m.aConfigs=null;var S=i.adapt.max?i.adapt.max+24:24;t.log(S);var _=function(t){var a=t.cr+t.cd;if(a>=S)return 0;var r=JSON.parse(JSON.stringify(m)),n=r.cPanel;r.aMinor[0]=(.05*t.hp+n["HP_PERCENT"][1])*n["HP"][0]+n["HP"][1],r.aMinor[1]=(.05*t.atk+n["ATTACK_PERCENT"][1])*n["ATTACK"][0]+n["ATTACK"][1],r.aMinor[2]=(.062*t.def+n["DEFENSE_PERCENT"][1])*n["DEFENSE"][0],r.aMinor[3]=20*t.em+100*n["ELEMENT_MASTERY"][1],r.aMinor[4]=3.3*t.cr+100*n["CRITICAL"][1],r.aMinor[5]=6.6*t.cd+100*n["CRITICAL_HURT"][1],r.aMinor[6]=5.5*t.er+100*n["CHARGE_EFFICIENCY"][1];var s={};return s=h[0]>0&&i.gResult?(0,o.buildGroupAttribute)(r):(0,o.buildAttribute)(r),e.calculator.get(s),Number(s.score)};try{Date.now();var w=v.maximize(_,s,l,u,g,p[h[1]]),y=(Date.now(),w.statBest);e.preset.tagNum=[y.hp,y.atk,y.def,y.em,y.cr,y.cd,y.er],t.log(y)}catch(T){t.error(T)}}}).call(this,a("5a52")["default"])},b209:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getColor=o,e.default=void 0;var r=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"];e.default=r;var n=["rgb(125,127,131)","rgb(108,168,139)","rgb(86,155,175)","rgb(177,135,195)","rgb(211,159,81)"];function o(t){var e=t/25;return e<0&&(e=0),e>4&&(e=4),n[Math.floor(e)]}},bcee:function(t,e,a){"use strict";var r=a("e52b"),n=a.n(r);n.a},d818:function(t,e,a){"use strict";(function(t){var r=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("5530")),o=a("fedd"),i=a("26cb"),s={data:function(){return{schoolArr:[{score:!0,name:"默认"}],schoolIndex:0,temp:{},reations:[],current:0,index:0,reactionTexts:["无反应","蒸发","融化","超激化","蔓激化"],reactionArr:{fire:[0,1,2],ice:[0,2],water:[0,1],thunder:[0,3],grass:[0,4]}}},computed:(0,n.default)((0,n.default)({},(0,i.mapState)(["preset","version"])),(0,i.mapGetters)(["character"])),onLoad:function(t){this.index=t.index,this.temp=JSON.parse(JSON.stringify(this.preset)),this.character.schools&&(this.schoolArr=this.character.schools,this.temp.school?this.schoolIndex=this.temp.school.index?this.temp.school.index:0:this.temp.school=(0,n.default)({},this.schoolArr[0]))},methods:{selectIndex:function(e){this.current=e,this.$forceUpdate(),t.log(e)},selectSchoolIndex:function(t){this.schoolIndex=t},save:function(){if(this.temp.school=(0,n.default)({},this.schoolArr[this.schoolIndex]),this.temp.school.index=this.schoolIndex,this.index>99){var t={school:this.temp.school,element:this.temp.school.element};uni.$emit("schoolChanged",t)}else{var e=this.temp.school.element;e&&(this.temp.element=e),(0,o.startCalculate)(this.temp),this.$store.commit("changeProfile",{temp:this.temp,index:this.index}),this.$store.commit("setPreset",this.temp)}uni.navigateBack({delta:1})}}};e.default=s}).call(this,a("5a52")["default"])},e265:function(t,e,a){"use strict";a.r(e);var r=a("748d"),n=a("3d37");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("bcee");var i,s=a("f0c5"),c=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"d83b913c",null,!1,r["a"],i);e["default"]=c.exports},e52b:function(t,e,a){var r=a("1dfd");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("4f06").default;n("8c48942a",r,!0,{sourceMap:!1,shadowMode:!1})},f15d:function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.bg-y[data-v-c5b075ba]{background-color:#fff}.uni-list-item__content[data-v-c5b075ba]{display:flex;padding-right:8px;flex:1;color:#3b4144;flex-direction:column;justify-content:space-between;overflow:hidden}.uni-list-item__content-title[data-v-c5b075ba]{font-size:14px;color:#3b4144;overflow:hidden}.uni-list-item__content-note[data-v-c5b075ba]{margin-top:%?6?%;color:#999;font-size:12px;overflow:hidden}.uni-section-header[data-v-c5b075ba]{position:relative;display:flex;flex-direction:row;align-items:center;padding:12px 10px;font-weight:400}.uni-section__head[data-v-c5b075ba]{flex-direction:row;justify-content:center;align-items:center;margin-right:10px}.line[data-v-c5b075ba]{height:12px;background-color:#b1968b;border-radius:10px;width:4px}.circle[data-v-c5b075ba]{width:8px;height:8px;border-top-right-radius:50px;border-top-left-radius:50px;border-bottom-left-radius:50px;border-bottom-right-radius:50px;background-color:#b1968b}.uni-section__content[data-v-c5b075ba]{display:flex;flex-direction:column;flex:1;color:#333}.uni-section__content-title[data-v-c5b075ba]{font-size:14px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.distraction[data-v-c5b075ba]{flex-direction:row;align-items:center}.uni-section__content-sub[data-v-c5b075ba]{font-size:12px;color:#999;line-height:16px;margin-top:2px}.uni-section__content__extra[data-v-c5b075ba]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center}.uni-icon-wrapper[data-v-c5b075ba]{display:flex;align-items:center;padding-left:10px;color:#999!important}.uni-list-item__extra-text[data-v-c5b075ba]{font-size:13px;color:#999}',""]),t.exports=e},f253:function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,".note-text[data-v-4c22d9a1]{padding:15px;font-size:14px;color:#666;line-height:22px}",""]),t.exports=e},f4f7:function(t,e,a){"use strict";a.r(e);var r=a("903e"),n=a("7ce9");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("5561");var i,s=a("f0c5"),c=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"4c22d9a1",null,!1,r["a"],i);e["default"]=c.exports},f86f:function(t,e,a){var r=a("f15d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("4f06").default;n("6eb03f5a",r,!0,{sourceMap:!1,shadowMode:!1})},fedd:function(t,e,a){"use strict";(function(t){var r=a("4ea4");a("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.initPreset=g,e.createPreset=p,e.getPreset=h,e.startCalculate=x,e.version=void 0;var n=r(a("5530")),o=a("0b7e"),i=a("175e"),s=a("aade"),c=a("433a"),l=a("7a53"),u=a("e194"),d=a("0d89"),f=a("4432"),v="2022年8月24日 15:37:17";function g(t,e){var a,r=e||t.name;"kong"==r&&(r="traveller");var o=t.element,i=null!==(a=c.characterDamage[r])&&void 0!==a?a:c.characterDamage[t.name];"traveller"==r&&(o=i.element);var s={cId:t.name,element:o,id:Date.now(),name:"默认预设",cSkills:[8,8,8],cLevel:90,wLevel:90,cAscend:!1,wAscend:!1,effects:[],isAdapt:void 0,type:0,reactionText:""};4==t.star&&(s.cSkills=[8,11,11]);var l=d.weaponsData[i.preset.wId];s.wStage=5==l.star?0:4,s.cStage=5==t.star?0:6;var u=(0,n.default)((0,n.default)({},s),i.preset);return u.aTagToMinor=!0,u}function p(t){var e=f.charactersData[t];return g(e)}function h(e){var a=f.charactersData[e],r=uni.getStorageSync(e);return r?(r.version&&v==r.version||(x(r,v),t.log("刷新！！"),uni.setStorageSync(r.cId,r)),r):g(a)}function x(e){var a,r=f.charactersData[e.cId];e.school||(e.school={name:"默认",score:!0,reaction:0});var n=e.school.id;n&&(a=c.characterDamage[n]),a||(a=c.characterDamage[e.cId]);var g=d.weaponsData[e.wId];e.element=a.element?a.element:r.element,e.energy=r.energy,e.wType=g.type,e.wName=g.chs,e.version=v;var p=[];if(p=a.output?JSON.parse(JSON.stringify(a.output)):r.output?JSON.parse(JSON.stringify(r.output)):[[1,4,5]],void 0==e.school.reaction&&r.schools){var h=r.schools[0];h.reaction||(h.reaction=0),e.school=h}if(e.school.reaction>0&&p[0].indexOf(3)<0&&p[0].push(3),"5jueyuan"!=e.aIds[0]||e.aSets||p[0].indexOf(6)<0&&p[0].push(6),!e.school.tagNum){var x=p[0],b=[0,0,0,0,0,0,0],m=x.length;if(-1==x.indexOf(5)){for(var S=0;S<m;S++){var _=x[S];b[_]=0==S?9:1==S?4:3}b[x[0]]=9,b[x[1]]=4}else for(S=0;S<m;S++){var w=x[S];b[w]=4==w||5==w?9:0==S?4:3}e.school.tagNum=b,t.log("初始化默认词条："+b)}if(e.tagNum||1!=e.aTagToMinor||(e.tagNum=JSON.parse(JSON.stringify(e.school.tagNum)),e.isAdapt=!0,e.adapt={type:0,limit:1,method:[0,0,0],total:24,min:[],max:0},t.log("重置当前词条："+e.tagNum)),e.output=p,e.wIndexs||(g.forceOption&&g.forceOption[e.cId]?e.wIndexs=g.forceOption[e.cId]:e.wIndexs=g.indexs),!e.aIndexs&&!e.aSets){var y=u.artifactsData[e.aIds[0]];y.forceOption&&y.forceOption[e.cId]?e.aIndexs=y.forceOption[e.cId]:e.aIndexs=y.indexs}e.cPanel||(e.cPanel={HP:[0,0],HP_PERCENT:[0,0],ATTACK:[0,0],ATTACK_PERCENT:[0,0],DEFENSE:[0,0],DEFENSE_PERCENT:[0,0],FIRE_ADD_HURT:[0,0],ICE_ADD_HURT:[0,0],ROCK_ADD_HURT:[0,0],ELEC_ADD_HURT:[0,0],WIND_ADD_HURT:[0,0],WATER_ADD_HURT:[0,0],GRASS_ADD_HURT:[0,0],PHYSICAL_ADD_HURT:[0,0],HEAL_ADD:[0,0],ELEMENT_MASTERY:[0,0],CRITICAL:[0,0],CRITICAL_HURT:[0,0],CHARGE_EFFICIENCY:[0,0]}),e.uid||(0,i.getMajorData)(e);var N={character:r,preset:e,calculator:a,weapon:g};(0,i.getBaseData)(N),e.isAdapt&&0!=e.adapt.type&&((0,s.getBestTag)(N),t.log("自动计算最优")),(0,l.convertMinor)(e),(0,o.getBaseScore)(N),(0,o.getGroupScore)(N),(0,o.getDataScore)(N),(0,o.getTagScore)(N),(0,o.getWeightScore)(N),(0,o.getGWeightScore)(N)}e.version=v}).call(this,a("5a52")["default"])}}]);