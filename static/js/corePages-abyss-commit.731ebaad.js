(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["corePages-abyss-commit"],{"0eae":function(t,e,i){var a=i("c363");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("19d90956",a,!0,{sourceMap:!1,shadowMode:!1})},"25a2":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".image[data-v-bd94d450]{width:%?130?%;height:%?130?%;border-radius:%?8?%}.text[data-v-bd94d450]{text-align:center;font-size:%?26?%;margin-top:%?10?%;color:#333}.uni-grid-item[data-v-bd94d450]{height:auto!important}.grid-item-box[data-v-bd94d450]{flex:1;\ndisplay:flex;\nflex-direction:column;align-items:center;justify-content:center;padding:%?20?% 0 0 0;margin:%?8?%;border-radius:%?8?%}",""]),t.exports=e},"36a6":function(t,e,i){"use strict";i.r(e);var a=i("8b82"),n=i("48c0");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("7fe6");var d,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"bd94d450",null,!1,a["a"],d);e["default"]=c.exports},"3fe9":function(t,e,i){"use strict";(function(t,a){var n=i("4ea4");i("c975"),i("4e82"),i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i("b85c"));i("96cf");var d=n(i("1da1")),s=n(i("5530")),c=i("26cb"),o=i("6925"),u={data:function(){return{url:"",videoInfo:null,index:0,margin:"15px 15px 30px 15px",first:[],second:[],selected:[],fristIds:[],secondIds:[],charactersData:{},selectIds:[]}},computed:(0,s.default)({},(0,c.mapState)(["favList","selectData","abyssData","warn"])),onLoad:function(t){this.abyss=t.abyss,uni.setNavigationBarTitle({title:t.abyss+"层阵容"}),this.initData()},methods:{toText:function(){uni.navigateTo({url:"./input"})},initData:function(){this.charactersData=o.charactersData,this.selectIds=uni.getStorageSync("ys-ownIds"),this.selected=JSON.parse(JSON.stringify(this.selectData))},setIndex:function(t){this.index=t},deleteFirst:function(t,e){this.index=0,this.first.splice(e,1),this.selected.push(t)},deleteSecond:function(t,e){this.index=1,this.second.splice(e,1),this.selected.push(t)},addItem:function(t,e){0==this.index?this.first.length<4&&(this.first.push(t),this.selected.splice(e,1)):this.second.length<4&&(this.second.push(t),this.selected.splice(e,1)),this.$forceUpdate()},changeVideo:function(){this.videoInfo=null},showError:function(){uni.showModal({title:"错误",content:"不是正确的B站地址",showCancel:!1})},getVideoInfo:function(){var e=this;return(0,d.default)(regeneratorRuntime.mark((function i(){var n,r,d,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(12==e.url.length){i.next=7;break}if(n=e.url.indexOf("/B"),t.log(n),e.url=e.url.substring(n+1,n+13),!(n<0||12!=e.url.length)){i.next=7;break}return e.showError(),i.abrupt("return");case 7:return t.log(e.url),r=a.importObject("videoInfo"),i.prev=9,i.next=12,r.get(e.url);case 12:d=i.sent,s=d.data.data,t.log(s),[172,65].indexOf(s.tid)>-1?e.videoInfo=d.data.data:uni.showModal({title:"错误",content:"只支持手机游戏/网络游戏区视频",showCancel:!1}),i.next=22;break;case 18:i.prev=18,i.t0=i["catch"](9),t.log(i.t0),uni.showModal({title:"错误",content:i.t0.errMsg,showCancel:!1});case 22:case"end":return i.stop()}}),i,null,[[9,18]])})))()},save:function(){if(this.first.length<1)uni.showToast({icon:"none",title:"上半阵容至少需要一人"});else if(this.second.length<1)uni.showToast({icon:"none",title:"下半阵容至少需要一人"});else{this.first.sort((function(t,e){return e.rank-t.rank}));var t,e=[],i=(0,r.default)(this.first);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.push(a.name)}}catch(f){i.e(f)}finally{i.f()}this.second.sort((function(t,e){return e.rank-t.rank}));var n,d=[],s=(0,r.default)(this.second);try{for(s.s();!(n=s.n()).done;){var c=n.value;d.push(c.name)}}catch(f){s.e(f)}finally{s.f()}if("12"==this.abyss){var o=[e,d],u=this.videoInfo;this.$store.commit("setTwelveAbyssData",{twelve:o,video:u});var l=this;uni.showModal({content:"是否填写十一层的阵容（可选）",confirmText:"好的",cancelText:"不用",success:function(t){t.confirm?uni.navigateTo({url:"./commit?abyss=11"}):t.cancel&&(l.$store.commit("setElevenAbyssData",[[],[]]),uni.navigateTo({url:"./submit"}))}})}else this.$store.commit("setElevenAbyssData",[e,d]),uni.navigateTo({url:"./submit"})}}}};e.default=u}).call(this,i("5a52")["default"],i("a9ff")["default"])},"408b":function(t,e,i){"use strict";i.r(e);var a=i("9d27"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"48c0":function(t,e,i){"use strict";i.r(e);var a=i("3fe9"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},5083:function(t,e,i){"use strict";i.r(e);var a=i("a3e7"),n=i("408b");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("b3ec");var d,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"6d06604a",null,!1,a["a"],d);e["default"]=c.exports},"7fe6":function(t,e,i){"use strict";var a=i("9f5f"),n=i.n(a);n.a},"8b82":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var a={uniCard:i("5083").default,uniSection:i("8483").default,uniGrid:i("84ec").default,uniGridItem:i("1eac").default,uniListItem:i("6fa1").default,uniEasyinput:i("489d").default,buttonBarBottom:i("f603").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"warp"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setIndex(0)}}},[i("uni-card",{attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:0==t.index?"【选择】上半":"上半",type:"line"}}),i("uni-grid",{attrs:{column:4,highlight:!0,showBorder:!1}},t._l(t.first,(function(e,a){return i("uni-grid-item",{key:a,staticClass:"uni-grid-item"},[i("v-uni-view",{staticClass:"grid-item-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteFirst(e,a)}}},[i("v-uni-image",{staticClass:"image",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"text"},[t._v(t._s(e.chs))])],1)],1)})),1),i("uni-list-item",{directives:[{name:"show",rawName:"v-show",value:0==t.first.length,expression:"first.length==0"}],attrs:{clickable:!0,title:"还没选择角色.."}})],1)],1),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setIndex(1)}}},[i("uni-card",{attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:1==t.index?"【选择】下半":"下半",type:"line"}}),i("uni-grid",{attrs:{column:4,highlight:!0,showBorder:!1}},t._l(t.second,(function(e,a){return i("uni-grid-item",{key:a,staticClass:"uni-grid-item"},[i("v-uni-view",{staticClass:"grid-item-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteSecond(e,a)}}},[i("v-uni-image",{staticClass:"image",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"text"},[t._v(t._s(e.chs))])],1)],1)})),1),i("uni-list-item",{directives:[{name:"show",rawName:"v-show",value:0==t.second.length,expression:"second.length==0"}],attrs:{title:"还没选择角色.."}})],1)],1),"12"==t.abyss?i("uni-card",{attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:"分享视频（可选）",type:"line"}}),t.videoInfo?i("uni-list-item",{attrs:{"thumb-size":"lg",clickable:!0,thumb:t.videoInfo.pic,title:t.videoInfo.title,note:t.videoInfo.tname,rightText:"修改"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeVideo.apply(void 0,arguments)}}}):i("v-uni-view",{staticStyle:{margin:"15px"}},[i("uni-easyinput",{attrs:{inputBorder:!1,clearable:!1,type:"textarea",clearSize:"20",placeholder:"目前仅支持B站手机/网络游戏区的视频地址.."},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),i("v-uni-button",{staticStyle:{"line-height":"22px",padding:"10px 10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getVideoInfo.apply(void 0,arguments)}}},[t._v("保存")])],1)],1):t._e(),i("uni-card",{attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:"拥有的角色",type:"line"}}),i("uni-grid",{attrs:{column:4,highlight:!0,showBorder:!1}},t._l(t.selected,(function(e,a){return i("uni-grid-item",{key:a,staticClass:"uni-grid-item"},[i("v-uni-view",{staticClass:"grid-item-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addItem(e,a)}}},[i("v-uni-image",{staticClass:"image",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"text"},[t._v(t._s(e.chs))])],1)],1)})),1)],1),i("button-bar-bottom",{attrs:{text:"下一步"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save()}}})],1)},r=[]},"9d27":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick:function(t){this.$emit("click",t)}}};e.default=a},"9f5f":function(t,e,i){var a=i("25a2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("78e78d44",a,!0,{sourceMap:!1,shadowMode:!1})},a3e7:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-card",class:{"uni-card--full":t.isFull,"uni-card--shadow":t.isShadow,"uni-card--border":t.border},style:{margin:t.isFull?0:t.margin,padding:t.spacing,"box-shadow":t.isShadow?t.shadow:""}},[t._t("cover",[t.cover?i("v-uni-view",{staticClass:"uni-card__cover"},[i("v-uni-image",{staticClass:"uni-card__cover-image",attrs:{mode:"widthFix",src:t.cover},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick("cover")}}})],1):t._e()]),t._t("title",[t.title||t.extra?i("v-uni-view",{staticClass:"uni-card__header"},[i("v-uni-view",{staticClass:"uni-card__header-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick("title")}}},[t.thumbnail?i("v-uni-view",{staticClass:"uni-card__header-avatar"},[i("v-uni-image",{staticClass:"uni-card__header-avatar-image",attrs:{src:t.thumbnail,mode:"aspectFit"}})],1):t._e(),i("v-uni-view",{staticClass:"uni-card__header-content"},[i("v-uni-text",{staticClass:"uni-card__header-content-title uni-ellipsis"},[t._v(t._s(t.title))]),t.title&&t.subTitle?i("v-uni-text",{staticClass:"uni-card__header-content-subtitle uni-ellipsis"},[t._v(t._s(t.subTitle))]):t._e()],1)],1),i("v-uni-view",{staticClass:"uni-card__header-extra",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick("extra")}}},[i("v-uni-text",{staticClass:"uni-card__header-extra-text"},[t._v(t._s(t.extra))])],1)],1):t._e()]),i("v-uni-view",{staticClass:"uni-card__content",style:{padding:t.padding},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick("content")}}},[t._t("default")],2),i("v-uni-view",{staticClass:"uni-card__actions",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick("actions")}}},[t._t("actions")],2)],2)},r=[]},b3ec:function(t,e,i){"use strict";var a=i("0eae"),n=i.n(a);n.a},c363:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-card[data-v-6d06604a]{margin:10px;padding:0 8px;border-radius:4px;overflow:hidden;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background-color:#fff;flex:1}.uni-card .uni-card__cover[data-v-6d06604a]{position:relative;margin-top:10px;flex-direction:row;overflow:hidden;border-radius:4px}.uni-card .uni-card__cover .uni-card__cover-image[data-v-6d06604a]{flex:1;vertical-align:middle}.uni-card .uni-card__header[data-v-6d06604a]{display:flex;border-bottom:1px #dcdcdc solid;flex-direction:row;align-items:center;padding:10px;overflow:hidden}.uni-card .uni-card__header .uni-card__header-box[data-v-6d06604a]{display:flex;flex:1;flex-direction:row;align-items:center;overflow:hidden}.uni-card .uni-card__header .uni-card__header-avatar[data-v-6d06604a]{width:40px;height:40px;overflow:hidden;border-radius:5px;margin-right:10px}.uni-card .uni-card__header .uni-card__header-avatar .uni-card__header-avatar-image[data-v-6d06604a]{flex:1;width:40px;height:40px}.uni-card .uni-card__header .uni-card__header-content[data-v-6d06604a]{display:flex;flex-direction:column;justify-content:center;flex:1;overflow:hidden}.uni-card .uni-card__header .uni-card__header-content .uni-card__header-content-title[data-v-6d06604a]{font-size:15px;color:#3a3a3a}.uni-card .uni-card__header .uni-card__header-content .uni-card__header-content-subtitle[data-v-6d06604a]{font-size:12px;margin-top:5px;color:#909399}.uni-card .uni-card__header .uni-card__header-extra[data-v-6d06604a]{line-height:12px}.uni-card .uni-card__header .uni-card__header-extra .uni-card__header-extra-text[data-v-6d06604a]{font-size:12px;color:#909399}.uni-card .uni-card__content[data-v-6d06604a]{padding:10px;font-size:14px;color:#6a6a6a;line-height:22px}.uni-card .uni-card__actions[data-v-6d06604a]{font-size:12px}.uni-card--border[data-v-6d06604a]{border:1px solid #dcdcdc}.uni-card--shadow[data-v-6d06604a]{position:relative;box-shadow:0 1px 8px 1px hsla(0,0%,64.7%,.2)}.uni-card--full[data-v-6d06604a]{margin:0;border-left-width:0;border-left-width:0;border-radius:0}.uni-card--full[data-v-6d06604a]:after{border-radius:0}.uni-ellipsis[data-v-6d06604a]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),t.exports=e}}]);