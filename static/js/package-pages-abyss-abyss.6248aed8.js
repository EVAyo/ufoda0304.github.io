(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["package-pages-abyss-abyss"],{"072c":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=u,e.friendlyDate=function(t,e){var a=e.locale,n=void 0===a?"zh":a,i=e.threshold,r=void 0===i?[6e4,36e5]:i,o=e.format,s=void 0===o?"yyyy/MM/dd hh:mm:ss":o;if("-"===t)return t;if(!t&&0!==t)return"";var l,d,f={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},h=f[n]||f.zh,g=c(t),v=g.getTime()-Date.now(),m=Math.abs(v);if(m<r[0])return v<0?h.justNow:h.soon;if(m>=r[1])return u(g,s);var p=h.later;v<0&&(p=h.ago,v=-v);var y=Math.floor(v/1e3),b=Math.floor(y/60),x=Math.floor(b/60),w=Math.floor(x/24),k=Math.floor(w/30),S=Math.floor(k/12);switch(!0){case S>0:l=S,d=h.year;break;case k>0:l=k,d=h.month;break;case w>0:l=w,d=h.day;break;case x>0:l=x,d=h.hour;break;case b>0:l=b,d=h.minute;break;default:l=y,d=h.second;break}"en"===n&&(1===l?l="a":d+="s");return h.template.replace(/{\s*num\s*}/g,l+"").replace(/{\s*unit\s*}/g,d).replace(/{\s*suffix\s*}/g,p)};var i=n(a("53ca"));function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t+="";while(t.length<e)t="0"+t;return t.slice(-e)}a("fb6a"),a("c975"),a("ac1f"),a("5319");var o={yyyy:function(t){return r(t.year,4)},yy:function(t){return r(t.year)},MM:function(t){return r(t.month)},M:function(t){return t.month},dd:function(t){return r(t.day)},d:function(t){return t.day},hh:function(t){return r(t.hour)},h:function(t){return t.hour},mm:function(t){return r(t.minute)},m:function(t){return t.minute},ss:function(t){return r(t.second)},s:function(t){return t.second},SSS:function(t){return r(t.millisecond,3)},S:function(t){return t.millisecond}};function c(t){if(t instanceof Date)return t;switch((0,i.default)(t)){case"string":return t.indexOf("T")>-1?new Date(t):new Date(t.replace(/-/g,"/"));default:return new Date(t)}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!t&&0!==t)return"";t=c(t);var a={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()},n=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,i=!0,r=e;while(i)i=!1,r=r.replace(n,(function(t){return i=!0,o[t](a)}));return r}},"0a26":function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("4e82"),a("14d9"),a("e9c4"),a("c975");var i=n(a("b85c")),r=n(a("c7eb")),o=n(a("1da1")),c=a("706f"),u=n(a("148e")),s={data:function(){return{abyss:{char:[],up:[],down:[],titles:["正在请求统计数据..","正在请求平均数据.."],time:0},diff:null,items:["角色使用率","队伍12层上","队伍12层下"],current:0,activeColor:"#b1968b",styleType:"text",margin:"0 15px 20px",charactersData:{}}},onLoad:function(){this.charactersData=c.charactersData;var e=Date.now(),a=uni.getStorageSync("ysin_abyss");a&&(this.abyss=a),(!a||e-a.time>72e5)&&(t.log("开始请求"),this.getHutaoData())},methods:{getHutaoData:function(){var e=this;return(0,o.default)((0,r.default)().mark((function a(){var n,i,o;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return uni.showLoading({title:"正在刷新..",icon:"none"}),a.prev=1,a.next=4,e.getRequest("Overview");case 4:return n=a.sent,a.next=7,e.getRequest("Avatar/UtilizationRate");case 7:return i=a.sent,a.next=10,e.getRequest("Team/Combination");case 10:o=a.sent,e.handleData(n.data,i.data,o.data),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](1),t.log(a.t0);case 17:case"end":return a.stop()}}),a,null,[[1,14]])})))()},getRequest:function(t){return new Promise((function(e,a){uni.request({url:"https://homa.snapgenshin.com/Statistics/"+t,headers:{"User-Agent":"Ysin/2.0"},timeout:1e4,success:function(t){e(t)},fail:function(t){a(t)}})}))},handleData:function(t,e,a){var n,r=t.data,o=r.SpiralAbyssTotal,c=(r.SpiralAbyssFullStar/o*100).toFixed(1)+"%",s=(r.SpiralAbyssPassed/o*100).toFixed(1)+"%",l=(r.SpiralAbyssStarTotal/o).toFixed(1),d=(r.SpiralAbyssBattleTotal/o).toFixed(1),f="通过率："+s+"，满星率："+c,h="平均战斗次数："+d+"，平均深渊星数："+l,g=e.data[3].Ranks,v=(0,i.default)(g);try{for(v.s();!(n=v.n()).done;){var m,p=n.value;p.id=null!==(m=u.default[p.Item])&&void 0!==m?m:p.Item,p.text=(100*p.Rate).toFixed(1)+"%"}}catch(B){v.e(B)}finally{v.f()}var y,b=a.data[3],x=[],w=(0,i.default)(b.Up);try{for(w.s();!(y=w.n()).done;){var k,S=y.value,_=S.Item.split(","),D={ids:[],total:S.Rate,up:!0,key:S.Item},M=(0,i.default)(_);try{for(M.s();!(k=M.n()).done;){var z,j=k.value,I=null!==(z=u.default[j])&&void 0!==z?z:j;D.ids.push(I)}}catch(B){M.e(B)}finally{M.f()}x.push(D)}}catch(B){w.e(B)}finally{w.f()}var C,R=[],O=(0,i.default)(b.Down);try{for(O.s();!(C=O.n()).done;){var q,N=C.value,A=N.Item.split(","),F={key:N.Item,ids:[],total:N.Rate,up:!1},T=(0,i.default)(A);try{for(T.s();!(q=T.n()).done;){var $,E=q.value,P=null!==($=u.default[E])&&void 0!==$?$:E;F.ids.push(P)}}catch(B){T.e(B)}finally{T.f()}R.push(F)}}catch(B){O.e(B)}finally{O.f()}var L={total:o,titles:[f,h],time:t.data.Timestamp,char:g.sort((function(t,e){return e.Rate-t.Rate})),up:x.sort((function(t,e){return e.total-t.total})),down:R.sort((function(t,e){return e.total-t.total}))};uni.setStorageSync("ysin_abyss",L),this.abyss=L,this.$store.commit("setUserAbyss",L.char[0].id),uni.hideLoading()},offDiff:function(){this.diff=null},onDiff:function(t,e){this.current=1==e?2:1,this.diff=JSON.parse(JSON.stringify(t))},getDiff:function(t,e){if(this.diff){if(t.up==this.diff.up)return!0;var a,n=(0,i.default)(this.diff.ids);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(t.ids.indexOf(r)>-1)return!1}}catch(o){n.e(o)}finally{n.f()}}return!0},onClickItem:function(t){this.current!==t.currentIndex&&(this.current=t.currentIndex)},upload:function(){uni.navigateTo({url:"./upload"})},goWiki:function(t){uni.navigateTo({url:"./../character/book/wiki?id="+t})}}};e.default=s}).call(this,a("5a52")["default"])},"148e":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={10000083:"linnite",10000084:"linni",10000085:"feimini",10000061:"qiliangliang",10000081:"kawei",10000082:"baishu",10000079:"dixiya",10000080:"mika",10000077:"yaoyao",10000078:"aierhaisen",10000075:"liulangzhe",10000076:"falushan",10000073:"naxida",10000074:"laiyila",10000072:"kandisi",10000070:"nilu",10000071:"sainuo",10000069:"tinali",10000067:"kelai",10000068:"duoli",10000003:"qin",10000006:"lisha",2e7:"zhujue",10000014:"babala",10000015:"kaiya",10000016:"diluke",10000020:"leize",10000022:"wendi",10000023:"xiangling",10000024:"beidou",10000025:"xingqiu",10000026:"xiao",10000027:"ningguang",10000029:"keli",10000030:"zhongli",10000031:"feixieer",10000032:"bannite",10000033:"dadaliya",10000034:"nuoaier",10000035:"qiqi",10000036:"chongyun",10000037:"ganyu",10000038:"abeiduo",10000039:"diaona",10000042:"keqing",10000043:"shatang",10000044:"xinyan",10000045:"luoshaliya",10000046:"hutao",10000047:"fengyuanwanye",10000048:"yanfei",10000051:"youla",10000005:"kong",10000007:"traveller",10000021:"anbo",10000041:"mona",10000002:"shenlilinghua",10000049:"xiaogong",10000052:"leidianjiangjun",10000053:"zaoyou",10000054:"shanhugongxinhai",10000056:"jiutiaoshaluo",10000062:"ailuoyi",10000050:"tuoma",10000055:"wulang",10000057:"huanglongyidou",10000058:"bachongshenzi",10000059:"luyeyuanpingzang",10000060:"yelan",10000063:"shenhe",10000064:"yunjin",10000065:"jiuqiren",10000066:"shenlilingren"}},"18c8":function(t,e,a){"use strict";var n=a("d09c"),i=a.n(n);i.a},1997:function(t,e,a){"use strict";a.r(e);var n=a("0a26"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},3479:function(t,e,a){"use strict";a.r(e);var n=a("c42f"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},5292:function(t,e,a){"use strict";a.r(e);var n=a("c6c5"),i=a("1997");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("18c8");var o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"74ccc1c9",null,!1,n["a"],void 0);e["default"]=c.exports},"5e29":function(t,e,a){"use strict";a.r(e);var n=a("e835"),i=a("3479");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"690ab064",null,!1,n["a"],void 0);e["default"]=c.exports},a958:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'.text[data-v-74ccc1c9]{text-align:center;font-size:13px;margin-top:4px;color:#333}\n\n\n\n/* \t.grid-item-box {\n\tflex: 1;\n\n\tdisplay: flex;\n\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 28rpx 0 8rpx;\n\tmargin: 10rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 8rpx;\n} */.round[data-v-74ccc1c9]{border-radius:%?5000?%}.team-title[data-v-74ccc1c9]{margin:20px 0 0 20px;color:#4169e1}.demo-uni-row[data-v-74ccc1c9]{margin:0 0 10px}.uni-grid-item[data-v-74ccc1c9]{height:auto!important}.grid-item-box[data-v-74ccc1c9]{flex:1;\ndisplay:flex;\nflex-direction:column;align-items:center;justify-content:center;padding:14px 0 0\n\t/* margin: 20rpx 0; */\n\t/* \t\tbackground: #f5f5f5;\n\tborder-radius: 8rpx; */}.image[data-v-74ccc1c9]{width:%?130?%;height:%?130?%;border-radius:%?8?%}.uni-list-item__content[data-v-74ccc1c9]{display:flex;padding-right:8px;flex:1;\n\t/* color: #3b4144; */\n\t/* overflow: hidden; */flex-direction:column;justify-content:space-between;overflow:hidden}.uni-list-item__content-title[data-v-74ccc1c9]{font-size:16px;\n\t/* font-weight: 700; */\n\t/* color: #3b4144; */overflow:hidden}.uni-list-item__content-note[data-v-74ccc1c9]{margin-top:%?6?%;\n\t/* color: #999; */font-size:14px;overflow:hidden}\n\n\n\n/* ==================\n          头像\n ==================== */.cu-avatar[data-v-74ccc1c9]{font-variant:small-caps;margin:0;padding:0;display:inline-flex;text-align:center;justify-content:center;align-items:center;background-color:#ccc;color:#fff;white-space:nowrap;position:relative;width:%?64?%;height:%?64?%;background-size:cover;background-position:50%;vertical-align:middle;font-size:1.5em}.cu-avatar.sm[data-v-74ccc1c9]{width:%?48?%;height:%?48?%;font-size:1em}.cu-avatar.lg[data-v-74ccc1c9]{width:%?96?%;height:%?96?%;font-size:2em}.cu-avatar.xl[data-v-74ccc1c9]{width:%?128?%;height:%?128?%;font-size:2.5em}.cu-avatar .avatar-text[data-v-74ccc1c9]{font-size:.4em}.cu-avatar-group[data-v-74ccc1c9]{direction:ltr;unicode-bidi:bidi-override;padding:0 %?10?% 0 %?40?%;display:inline-block\n\t/* \t\tjustify-content: flex-end;\n\tdisplay: flex;\n\t flex-direction: row; */}.cu-avatar-group .cu-avatar[data-v-74ccc1c9]{margin-left:%?-30?%;\n\t/* margin-left: 5px; */border:%?4?% solid #f1f1f1;vertical-align:middle}.cu-avatar-group .cu-avatar.sm[data-v-74ccc1c9]{margin-left:%?-20?%;border:%?1?% solid #f1f1f1}.bg-red.light[data-v-74ccc1c9]{color:#e54d42;\n\t/* background-color: #fadbd9; */background-color:rgba(250,219,217,.5)}.bg-orange.light[data-v-74ccc1c9]{color:#f37b1d;background-color:#fde6d2}.bg-yellow.light[data-v-74ccc1c9]{color:#fbbd08;background-color:rgba(254,242,206,.8235294117647058)}.bg-olive.light[data-v-74ccc1c9]{color:#8dc63f;background-color:#e8f4d9}.bg-green.light[data-v-74ccc1c9]{color:#39b54a;background-color:#d7f0db}.bg-cyan.light[data-v-74ccc1c9]{color:#1cbbb4;\n\t/* background-color: #d2f1f0; */background-color:rgba(210,241,240,.5)}.bg-blue.light[data-v-74ccc1c9]{color:#0081ff;\n\t/* background-color: #cce6ff; */background-color:rgba(204,230,255,.5)}.bg-purple.light[data-v-74ccc1c9]{color:#6739b6;\n\t/* background-color: #e1d7f0; */background-color:rgba(225,215,240,.5)}.bg-mauve.light[data-v-74ccc1c9]{color:#9c26b0;background-color:#ebd4ef}.bg-pink.light[data-v-74ccc1c9]{color:#e03997;background-color:#f9d7ea}.bg-brown.light[data-v-74ccc1c9]{color:#a5673f;background-color:#ede1d9}.bg-grey.light[data-v-74ccc1c9]{color:#8799a3;background-color:#e7ebed}.uni-list--border[data-v-74ccc1c9]{position:absolute;top:0;right:0;left:0;\n}\n.uni-list--border[data-v-74ccc1c9]:after{position:absolute;top:0;right:0;left:0;height:1px;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);background-color:$uni-border-color}\n\n\n\n',""]),t.exports=e},c42f:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("e25e");var n=a("072c"),i={name:"uniDateformat",props:{date:{type:[Object,String,Number],default:function(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default:function(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:function(){return{refreshMark:0}},computed:{dateShow:function(){return this.refreshMark,(0,n.friendlyDate)(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler:function(){this.setAutoRefresh()},immediate:!0}},methods:{refresh:function(){this.refreshMark++},setAutoRefresh:function(){var t=this;clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((function(){t.refresh()}),parseInt(this.refreshRate)))}}};e.default=i},c6c5:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={uniCard:a("3571").default,uniSection:a("1b69").default,uniDateformat:a("5e29").default,uniList:a("3e80").default,uniListItem:a("9d9b").default,ysinSegment:a("b494").default,uniGrid:a("b819").default,uniGridItem:a("aa3f").default,buttonBarBottom:a("c37c").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("uni-card",{attrs:{padding:"0",margin:"14px",spacing:"0"}},[a("uni-section",{attrs:{title:t.abyss.total?"共"+t.abyss.total+"条记录":"统计",type:"line","right-text":""},scopedSlots:t._u([{key:"extra",fn:function(){return[a("uni-dateformat",{staticStyle:{"font-size":"14px"},attrs:{date:t.abyss.time,threshold:[6e4,36e5]}})]},proxy:!0}])}),a("v-uni-view",{}),a("uni-list",[a("uni-list-item",{staticClass:"item-space",attrs:{title:"1、"+t.abyss.titles[0]}}),a("uni-list-item",{staticClass:"item-space",attrs:{title:"2、"+t.abyss.titles[1]}}),a("uni-list-item",{staticClass:"item-space",attrs:{title:"3、数据来源：DGP-Studio / 胡桃数据库"}}),a("uni-list-item",{staticClass:"item-space",attrs:{title:"4、数据每2小时更新一次"}})],1)],1),a("ysin-segment",{attrs:{current:t.current,values:t.items,"active-color":t.activeColor},on:{clickItem:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickItem.apply(void 0,arguments)}}}),a("uni-card",{attrs:{padding:"0",margin:"14px",spacing:"0"}},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.current,expression:"current == 0"}]},[a("uni-section",{attrs:{title:"角色",type:"line","right-text":"12层出场次数 / 12层玩家持有数"}}),a("uni-grid",{attrs:{column:4,highlight:!0,showBorder:!1}},t._l(t.abyss.char,(function(e,n){return a("uni-grid-item",{key:n,staticClass:"uni-grid-item"},[a("v-uni-view",{staticClass:"grid-item-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goWiki(e.id)}}},[a("v-uni-image",{staticClass:"image",attrs:{src:t.charactersData[e.id].avatar,mode:"aspectFill"}}),a("v-uni-text",{staticClass:"text"},[t._v(t._s(e.text))])],1)],1)})),1)],1),t.diff&&0!=t.current?a("v-uni-view",[a("uni-section",{attrs:{title:t.diff.up?"队伍上":"队伍下",type:"line","right-text":"点击取消筛选"}}),a("uni-list-item",{attrs:{clickable:!0,title:t.diff.total+"次"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.offDiff()}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("v-uni-view",{staticClass:"cu-avatar-group"},t._l(t.diff.ids,(function(e,n){return a("v-uni-image",{key:n,staticClass:"cu-avatar round lg",style:{zIndex:99-n},attrs:{src:t.charactersData[e].avatar,mode:"aspectFill"}})})),1)]},proxy:!0}],null,!1,3538390856)})],1):t._e(),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1==t.current,expression:"current == 1"}]},[a("uni-section",{attrs:{title:"队伍上",type:"line","right-text":"点击队伍进行筛选"}}),t._l(t.abyss.up,(function(e,n){return a("uni-list-item",{directives:[{name:"show",rawName:"v-show",value:t.getDiff(e,1),expression:"getDiff(team,1)"}],key:n,attrs:{clickable:!0,title:e.total+"次"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onDiff(e,1)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("v-uni-view",{staticClass:"cu-avatar-group"},t._l(e.ids,(function(e,n){return a("v-uni-image",{key:n,staticClass:"cu-avatar round lg",style:{zIndex:99-n},attrs:{src:t.charactersData[e].avatar,mode:"aspectFill"}})})),1)]},proxy:!0}],null,!0)})}))],2),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.current,expression:"current == 2"}]},[a("uni-section",{attrs:{title:"队伍下",type:"line","right-text":"点击队伍进行筛选"}}),t._l(t.abyss.down,(function(e,n){return a("uni-list-item",{directives:[{name:"show",rawName:"v-show",value:t.getDiff(e,2),expression:"getDiff(team,2)"}],key:n,attrs:{clickable:!0,title:e.total+"次"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onDiff(e,2)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("v-uni-view",{staticClass:"cu-avatar-group"},t._l(e.ids,(function(e,n){return a("v-uni-image",{key:n,staticClass:"cu-avatar round lg",style:{zIndex:99-n},attrs:{src:t.charactersData[e].avatar,mode:"aspectFill"}})})),1)]},proxy:!0}],null,!0)})}))],2)],1),a("button-bar-bottom",{attrs:{text:"上传数据"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload()}}})],1)},r=[]},d09c:function(t,e,a){var n=a("a958");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("5c716c64",n,!0,{sourceMap:!1,shadowMode:!1})},e835:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-text",[this._v(this._s(this.dateShow))])},i=[]}}]);