(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-character-config-property"],{"8f9a":function(t,e,i){"use strict";i.r(e);var a=i("b97c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},b97c:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("c975"),i("a434"),i("a9e3"),i("acd8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),s=a(i("5530")),o=(i("fd88"),i("26cb")),c={data:function(){return{weaponId:"",showAdapt:!1,isAdapt:!1,roadMapTexts:[{title:"词条 - 圣遗物",text:"显示各有效词条权重和增幅，判断提升方向"},{title:"更换 - 圣遗物杯子",text:"显示不同杯子的词条差，判断是否值得换"},{title:"其他 - 伤害",text:"显示提升伤害的增幅，判断装备、队友等选择"},{title:"技能 - 等级",text:"显示升1级技能增幅，判断是否优先刷天赋"},{title:"人物 - 等级",text:"显示物升到满级的增幅，判断是否拉满"}],roadMaps:[!0,!1,!1,!1,!1],disableWeaponOptions:!1,disableArtifactOptions:!1,weaponOptionsNote:"大部分武器默认触发",artifacOptionsNote:"大部分圣遗物默认触发",wEffectTexts:"",aEffectTexts:"",tempWeapon:{},effectTexts:[],saveText:"保存",isGroup:!1,artifactText:"",temp:{},artifacts:[],skillText:"9 / 9 / 9",noArtifactPic:"/static/artifact.png",setNum:"[4]",constellationArr:["0","1","2","3","4","5","6"],skillArr:[[1,2,3,4,5,6,7,8,9,10,11],[1,2,3,4,5,6,7,8,9,10,11,12,13],[1,2,3,4,5,6,7,8,9,10,11,12,13]],refineArr:["1","2","3","4","5"],levelArr:["90","89","88","87","86","85"," 84","83","82","81","80"]}},computed:(0,s.default)((0,s.default)({},(0,o.mapState)(["preset"])),(0,o.mapGetters)(["artifact","artifact2","weapon","character"])),onUnload:function(){uni.$off("artifactChanged"),uni.$off("weaponChanged")},onLoad:function(t){if(this.temp=JSON.parse(JSON.stringify(this.preset)),this.tempWeapon=this.weapon,this.weaponId=this.weapon.name,this.temp.roadMaps&&(this.roadMaps=this.temp.roadMaps),this.artifacts[0]=this.artifact,this.artifacts[1]=this.artifact2,this.weapon.options){this.setWeaponOptionsDisable(this.weapon);var e=this.temp.wIndexs;e||(e=this.weapon.indexs),this.setWeaponOptionText(e)}if(this.artifact.options&&!this.temp.aSets){this.setArtifactOptionDisable(this.artifact);var i=this.temp.aIndexs;i||(i=this.artifact.indexs),this.setArtifactOptionText(i)}var a={detail:{value:this.temp.cSkills}};this.skillChange(a);var n=this;uni.$on("weaponChanged",(function(t){t.name!=n.temp.wId&&(n.tempWeapon=t,n.temp.wId=t.name,n.temp.wNotice=!0,n.switchChange(1),t.indexs&&n.setWeaponOptionText(t.indexs),n.setWeaponOptionsDisable(t),n.showAdapt=n.weaponId!=t.name,n.isAdapt=!1,5==t.star?n.temp.wStage=0:n.temp.wStage=4,n.$forceUpdate())})),uni.$on("artifactChanged",(function(t){var e=t.index;if(t.name){var i=(0,s.default)({},t);n.artifacts[e]=i,n.$forceUpdate(),1==n.temp.aSets&&n.artifacts.length>1&&n.artifacts[0].name==n.artifacts[1].name&&(n.temp.aSets=!1,n.artifacts.splice(1,1)),n.setArtifactText(),n.temp.aSets||(t.indexs?n.setArtifactOptionText(t.indexs):n.aIndexs=null,n.setArtifactOptionDisable(t))}else n.artifacts.splice(e,1)})),this.setArtifactText()},methods:{onSwitchChange:function(t){this.isAdapt=!this.isAdapt},setRoadMap:function(t){this.roadMaps[t]=!this.roadMaps[t]},setArtifactOptionDisable:function(t){var e=!1,i=t.forceOption;i&&i[this.character.name]&&(e=!0,this.aIndexs=i[this.character.name],this.setArtifactOptionText(i[this.character.name])),this.disableArtifactOptions=e,this.artifacOptionsNote=e?"该角色无法修改这个圣遗物的选项":"大部分圣遗物默认触发"},setWeaponOptionsDisable:function(t){var e=!1,i=t.forceOption;i&&i[this.character.name]&&(e=!0,this.setWeaponOptionText(i[this.character.name]));var a=t.noOptionKey;a&&this.character.skillKey.indexOf(a)>-1&&(e=!0),this.disableWeaponOptions=e,this.weaponOptionsNote=e?"该角色无法修改这个武器的选项":"大部分武器默认触发"},switchChange:function(t){0==t?this.temp.cNotice?this.temp.cNotice=!this.temp.cNotice:this.temp.cNotice=!0:this.temp.wNotice?this.temp.wNotice=!this.temp.wNotice:this.temp.wNotice=!0},setWeaponOptionText:function(t){for(var e=[],i=0;i<t.length;i++){var a=t[i];e.push(this.tempWeapon.options[i][a])}this.wIndexs=t,this.wEffectTexts=e.join(" / ")},setArtifactOptionText:function(t){for(var e=[],i=0;i<t.length;i++){var a=t[i];e.push(this.artifacts[0].options[i][a])}this.aIndexs=t,this.aEffectTexts=e.join(" / ")},artifactsOptionsChange:function(t){var e=t.detail.value;this.setArtifactOptionText(e)},optionsChange:function(t){var e=t.detail.value;this.setWeaponOptionText(e)},tapSwitch2:function(e){t.log(e.require),t.log(this.temp.cStage)},setArtifactText:function(){this.temp.aSets?(this.setNum=" [2]",this.artifactText=this.artifacts[0].effectText[0]):(this.setNum=" [4]",this.artifactText=this.artifacts[0].effectText[0]+this.artifacts[0].effectText[1])},changeModel:function(){uni.showToast({title:"暂不支持修改",duration:2e3})},tapSwitch:function(t){this.temp.aSets=t.value,this.setArtifactText()},constellationChange:function(t){var e=t.detail.value;this.temp.cStage=e},levelChange:function(t){var e=t.detail.value;this.temp.cLevel=e},skillChange:function(t){for(var e=t.detail.value,i=[],a=[],n=0;n<e.length;n++)a.push(e[n]),i.push(e[n]+1);this.temp.cSkills=a,this.skillText=i.join(" / ")},refineChange:function(t){this.temp.wStage=t.detail.value},changeAtkMinor:function(){if(this.isAdapt){var t,e=0,i=(0,n.default)(this.preset.aMajor);try{for(i.s();!(t=i.n()).done;){var a=t.value;1==a&&(e+=1)}}catch(p){i.e(p)}finally{i.f()}var s=this.preset.base[1],o=((this.preset.aMinor[1]-311)/s-.466*e)/.05,c=90-this.temp.cLevel,r=this.character,h=(r.attack[13]-r.attack[12])/10*(c-80)+r.attack[12]+parseFloat(this.tempWeapon.atk),l=(.05*o+.466*e)*h+311;this.temp.aMinor[1]=Math.floor(100*l)/100}},save:function(){var t=this.artifacts.length;0!=t?!this.temp.aSets||this.artifacts[1]?(this.temp.aSets&&1==t&&(this.temp.aSets=!1),this.temp.aIds=[this.artifacts[0].name],this.temp.aSets&&this.temp.aIds.push(this.artifacts[1].name),this.temp.cStage=Number(this.temp.cStage),this.temp.cLevel=Number(this.temp.cLevel),this.temp.wStage=Number(this.temp.wStage),this.temp.wIndexs=this.wIndexs,this.temp.aIndexs=this.aIndexs,this.temp.roadMaps=this.roadMaps,this.changeAtkMinor(),this.$store.dispatch("handlePreset",this.temp),uni.navigateBack({delta:1})):uni.showToast({title:"没有圣遗物二！",duration:3e3}):uni.showToast({title:"没有圣遗物!",duration:3e3})},toArtifact:function(t){uni.navigateTo({url:"/pages/character/config/artifact?index="+t})}}};e.default=c}).call(this,i("5a52")["default"])},c1a4:function(t,e,i){"use strict";i.r(e);var a=i("c6ea"),n=i("8f9a");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o,c=i("f0c5"),r=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"5e477220",null,!1,a["a"],o);e["default"]=r.exports},c6ea:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniSection:i("8483").default,uniList:i("b532").default,uniListItem:i("6fa1").default,weaponItem:i("6788").default,buttonBarBottom:i("f603").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("uni-section",{attrs:{title:"人物",type:"line"}},[i("uni-list",[i("v-uni-picker",{attrs:{value:t.temp.cLevel,range:t.levelArr},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.levelChange.apply(void 0,arguments)}}},[i("uni-list-item",{attrs:{"thumb-size":"lg",showArrow:!0,thumb:t.character.avatar,title:"等级",note:"最少为80级突破",rightText:t.levelArr[t.temp.cLevel]+"级"}})],1),i("v-uni-picker",{attrs:{value:t.temp.cStage,range:t.constellationArr},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.constellationChange.apply(void 0,arguments)}}},[i("uni-list-item",{attrs:{showArrow:!0,title:"命座",note:"所选的影响伤害的命座默认触发",rightText:t.temp.cStage+"命"}})],1),i("v-uni-picker",{attrs:{mode:"multiSelector",value:t.temp.cSkills,range:t.skillArr},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.skillChange.apply(void 0,arguments)}}},[i("uni-list-item",{attrs:{showArrow:!0,title:"技能",note:"按实际填写，命座不会再次+3",rightText:t.skillText}})],1)],1)],1),i("uni-section",{attrs:{title:"武器",type:"line"}},[i("weapon-item",{on:{changeWeaponAtk:function(e){arguments[0]=e=t.$handleEvent(e),t.onSwitchChange.apply(void 0,arguments)}}}),t.tempWeapon.options?i("v-uni-picker",{attrs:{mode:"multiSelector",disabled:t.disableWeaponOptions,value:t.wIndexs,range:t.tempWeapon.options},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.optionsChange.apply(void 0,arguments)}}},[i("uni-list-item",{attrs:{showArrow:!0,title:"武器特效",note:t.weaponOptionsNote,rightText:t.wEffectTexts}})],1):t._e(),i("v-uni-picker",{attrs:{value:t.temp.wStage,range:t.refineArr},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.refineChange.apply(void 0,arguments)}}},[i("uni-list-item",{attrs:{showArrow:!0,title:"精炼级别",note:"选择五星默认1精, 其他默认5精",rightText:t.refineArr[t.temp.wStage]+"精"}})],1),i("uni-list-item",{directives:[{name:"show",rawName:"v-show",value:t.showAdapt,expression:"showAdapt"}],attrs:{showSwitch:!0,switchChecked:t.isAdapt,title:"自动调整",note:"保持攻击词条不变,自动改变圣遗物的攻击加成"},on:{switchChange:function(e){arguments[0]=e=t.$handleEvent(e),t.onSwitchChange()}}})],1),i("uni-section",{attrs:{title:"圣遗物",type:"line"}},[i("v-uni-view",{staticClass:"uni-list"},[t.artifacts[0]?i("uni-list-item",{attrs:{"thumb-size":"lg",showArrow:!0,clickable:!0,note:t.artifactText,thumb:t.artifacts[0].url,title:t.artifacts[0].chs+t.setNum},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toArtifact(0)}}}):i("uni-list-item",{attrs:{title:"点击选择圣遗物套装一","thumb-size":"lg",showArrow:!0,thumb:t.noArtifactPic,clickable:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toArtifact(0)}}}),t.temp.aSets?i("v-uni-view",[t.artifacts[1]?i("uni-list-item",{attrs:{showArrow:!0,"thumb-size":"lg",clickable:!0,thumb:t.artifacts[1].url,title:t.artifacts[1].chs+" [2]",note:t.artifacts[1].effectText[0]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toArtifact(1)}}}):i("uni-list-item",{attrs:{title:"点击选择圣遗物套装二",showArrow:!0,"thumb-size":"lg",thumb:t.noArtifactPic,clickable:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toArtifact(1)}}})],1):t.artifacts[0].options?i("v-uni-picker",{attrs:{mode:"multiSelector",disabled:t.disableArtifactOptions,value:t.aIndexs,range:t.artifacts[0].options},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.artifactsOptionsChange.apply(void 0,arguments)}}},[i("uni-list-item",{attrs:{showArrow:!0,title:"圣遗物特效",note:t.artifacOptionsNote,rightText:t.aEffectTexts}})],1):t._e(),i("uni-list-item",{attrs:{showSwitch:!0,switchChecked:t.temp.aSets,title:"开启圣遗物套装二"},on:{switchChange:function(e){arguments[0]=e=t.$handleEvent(e),t.tapSwitch.apply(void 0,arguments)}}})],1)],1),i("uni-section",{attrs:{title:"素材提醒",type:"line"}},[i("uni-list-item",{attrs:{showSwitch:!0,switchChecked:t.temp.cNotice,title:"天赋",note:t.character.remind.name},on:{switchChange:function(e){arguments[0]=e=t.$handleEvent(e),t.switchChange(0)}}}),i("uni-list-item",{attrs:{showSwitch:!0,switchChecked:t.temp.wNotice,title:"武器",note:t.tempWeapon.remind.name},on:{switchChange:function(e){arguments[0]=e=t.$handleEvent(e),t.switchChange(1)}}})],1),i("uni-section",{attrs:{title:"提升建议",type:"line"}},t._l(t.roadMapTexts,(function(e,a){return i("uni-list-item",{key:a,attrs:{showSwitch:!0,switchChecked:t.roadMaps[a],title:e.title,note:e.text},on:{switchChange:function(e){arguments[0]=e=t.$handleEvent(e),t.setRoadMap(a)}}})})),1),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save()}}},[i("button-bar-bottom",{attrs:{text:t.saveText}})],1)],1)},s=[]}}]);