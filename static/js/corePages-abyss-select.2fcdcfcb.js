(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["corePages-abyss-select"],{"08a3":function(t,e,a){"use strict";var i=a("5477"),n=a.n(i);n.a},"1c45":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{text:{type:String,default:"保存"}},data:function(){return{}},methods:{onClick:function(){this.$emit("click",{data:{}})}}};e.default=i},"31ba":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var i={uniSection:a("8483").default,uniGrid:a("84ec").default,uniGridItem:a("1eac").default,buttonBarBottom:a("f603").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"warp"},[a("uni-section",{attrs:{title:"拥有 -"+t.selectIds.length,type:"line"}}),a("uni-grid",{attrs:{column:4,highlight:!0,showBorder:!1}},t._l(t.selectIds,(function(e,i){return a("uni-grid-item",{key:i,staticClass:"uni-grid-item"},[a("v-uni-view",{staticClass:"grid-item-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.removeItem(e,i)}}},[a("v-uni-image",{staticClass:"image",attrs:{src:t.charactersData[e].avatar,mode:"aspectFill"}}),a("v-uni-text",{staticClass:"text"},[t._v(t._s(t.charactersData[e].chs))])],1)],1)})),1),a("uni-section",{attrs:{title:"未拥有 ",type:"line"}}),a("uni-grid",{attrs:{column:4,highlight:!0,showBorder:!1}},t._l(t.charactersData,(function(e,i){return a("uni-grid-item",{directives:[{name:"show",rawName:"v-show",value:t.selectIds.indexOf(e.name)<0&&1!=e.status,expression:"selectIds.indexOf(item.name) < 0 && item.status != 1"}],key:i,staticClass:"uni-grid-item"},[a("v-uni-view",{staticClass:"grid-item-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addItem(e)}}},[a("v-uni-image",{staticClass:"image",attrs:{src:e.avatar,mode:"aspectFill"}}),a("v-uni-text",{staticClass:"text"},[t._v(t._s(e.chs))])],1)],1)})),1),a("button-bar-bottom",{attrs:{text:"下一步"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save()}}})],1)},s=[]},"3d96":function(t,e,a){"use strict";var i=a("4ea4");a("4e82"),a("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("b85c")),s=i(a("5530")),r=a("26cb"),o=a("6925"),c={data:function(){return{charactersData:{},selectIds:[]}},computed:(0,s.default)({},(0,r.mapState)(["favList","allList"])),onLoad:function(){uni.setNavigationBarTitle({title:"选择拥有的角色"}),this.initData()},methods:{initData:function(){this.charactersData=o.charactersData;var t=uni.getStorageSync("ys-ownIds");if(t)this.selectIds=t;else{var e=[];if(this.favList.length>0){var a,i=(0,n.default)(this.favList);try{for(i.s();!(a=i.n()).done;){var s=a.value;e.push(s.name)}}catch(r){i.e(r)}finally{i.f()}}else e.push(o.charactersData["traveller"].name);this.selectIds=e}},addItem:function(t){1!=t.status&&this.selectIds.push(t.name)},removeItem:function(t,e){o.charactersData[t].status||this.selectIds.splice(e,1)},save:function(){if(this.selectIds.length<5)uni.showToast({title:"不能少于5人",icon:"none"});else{uni.setStorageSync("ys-ownIds",this.selectIds);var t,e=[],a=(0,n.default)(this.selectIds);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push(o.charactersData[i])}}catch(w){a.e(w)}finally{a.f()}e.sort((function(t,e){return e.rank-t.rank})),this.$store.commit("setSelectData",e);for(var s=0,r=0,c={},u={kaiya:!0,lisha:!0,xiangling:!0,babala:!0,anbo:!0},l={},d=0,f=e;d<f.length;d++){var v=f[d];if(5==v.star){if(v.wish){var h,g=(0,n.default)(v.wish);try{for(g.s();!(h=g.n()).done;){var m=h.value;c[m]=!0}}catch(w){g.e(w)}finally{g.f()}}}else l[v.name]=!0}for(var b in c)void 0==l[b]&&(s+=1);for(var p in u)void 0==l[p]&&(r+=1);var x={twelve:[],content:"",eleven:[[],[]],risk:[s,r]};this.$store.commit("setAbyssData",x),uni.navigateTo({url:"./commit?abyss=12"})}}}};e.default=c},"483e":function(t,e,a){"use strict";var i=a("f869"),n=a.n(i);n.a},5477:function(t,e,a){var i=a("f887");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("7c4d1f17",i,!0,{sourceMap:!1,shadowMode:!1})},"67ed":function(t,e,a){"use strict";a.r(e);var i=a("1c45"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},ab0d:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"height-set"}),a("v-uni-view",{staticClass:"goods-carts",staticStyle:{"background-color":"#FFFFFF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"content"},[t._v(t._s(t.text))]),a("v-uni-view",{staticClass:"bottom-view"})],1)],1)},s=[]},b54c:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".image[data-v-eb1df4b8]{width:%?130?%;height:%?130?%;border-radius:%?8?%}.text[data-v-eb1df4b8]{text-align:center;font-size:%?26?%;margin-top:%?10?%;color:#333}.uni-grid-item[data-v-eb1df4b8]{height:auto!important}.grid-item-box[data-v-eb1df4b8]{flex:1;\ndisplay:flex;\nflex-direction:column;align-items:center;justify-content:center;padding:%?40?% 0 0 0;margin:%?8?%;border-radius:%?8?%}",""]),t.exports=e},e749:function(t,e,a){"use strict";a.r(e);var i=a("31ba"),n=a("e7b3");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("483e");var r,o=a("f0c5"),c=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"eb1df4b8",null,!1,i["a"],r);e["default"]=c.exports},e7b3:function(t,e,a){"use strict";a.r(e);var i=a("3d96"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},f603:function(t,e,a){"use strict";a.r(e);var i=a("ab0d"),n=a("67ed");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("08a3");var r,o=a("f0c5"),c=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"f7d2f876",null,!1,i["a"],r);e["default"]=c.exports},f869:function(t,e,a){var i=a("b54c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("25488842",i,!0,{sourceMap:!1,shadowMode:!1})},f887:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".content[data-v-f7d2f876]{height:50px;width:100%;max-width:500px;position:relative;display:block;margin-left:auto;margin-right:auto;box-sizing:border-box;font-size:18px;text-align:center;text-decoration:none;line-height:2.55555556;color:#fff;background-color:#ad9388}.bottom-view[data-v-f7d2f876]{background-color:#ad9388;height:calc(env(safe-area-inset-bottom)/2)}.height-set[data-v-f7d2f876]{\n\t/* background-color: #000000; */height:100px}.goods-carts[data-v-f7d2f876]{background-color:#ad9388;display:flex;flex-direction:column;position:fixed;left:0;right:0;\nleft:var(--window-left);right:var(--window-right);\nbottom:0;z-index:998}",""]),t.exports=e}}]);