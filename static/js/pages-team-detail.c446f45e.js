(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-team-detail"],{"01a0":function(t,e,i){"use strict";var a=i("9aee"),n=i.n(a);n.a},"0f83":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".js[data-v-97cf0aca]{width:25%;background-color:#6a63ab}.js2[data-v-97cf0aca]{width:5%;background-color:#6a63ab}.skills[data-v-97cf0aca]{white-space:nowrap;\n\t\t/* overflow: ; */overflow:visible;text-overflow:ellipsis;font-size:14px;text-align:left;padding-left:5px;line-height:40px;color:#999}\n\n\t/* \t.swiper-item-bg {\n\t\tcolor: #7f858a;\n\t\tbackground-color: #fafafa;\n\t}\n */.example-body[data-v-97cf0aca]{\ndisplay:flex;\nflex-direction:row;justify-content:flex-start;align-items:flex-end;flex-wrap:wrap}.tag-view[data-v-97cf0aca]{margin-right:10px}.goods-carts[data-v-97cf0aca]{\ndisplay:flex;\nflex-direction:column;position:fixed;left:0;right:0;\nleft:var(--window-left);right:var(--window-right);\nbottom:0;z-index:1000}",""]),t.exports=e},1148:function(t,e,i){"use strict";var a=i("5926"),n=i("577e"),r=i("1d80"),s=RangeError;t.exports=function(t){var e=n(r(this)),i="",o=a(t);if(o<0||o==1/0)throw s("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},"21e2":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var a={uniCard:i("3571").default,uniSection:i("1b69").default,uniListItem:i("9d9b").default,uniLink:i("e993").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.needInit?t._l(t.initPresets,(function(e,a){return i("uni-card",{key:a,attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-list-item",{attrs:{"thumb-size":"lg",clickable:!0,thumb:t.charactersData[e.cId].avatar,title:"该角色未初始化，无法进行计算..",rightText:"配置",showArrow:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toInit(e)}}})],1)})):i("v-uni-view",[i("uni-card",{attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:"伤害分析",type:"line",rightText:t.team.dps}},[i("uni-list-item",{attrs:{showBadge:!0,title:"总期望伤害",note:"对比基准为5万DPS（100分）",rightText:t.team.sText+" / 100%",clickable:!0},scopedSlots:t._u([{key:"header",fn:function(){return[i("v-uni-view",{staticClass:"cu-avatar",style:{backgroundColor:t.team.result.color}},[t._v(t._s(t.team.result.score))])]},proxy:!0}],null,!1,1238893863)}),t._l(t.members,(function(e,a){return i("uni-list-item",{key:a,attrs:{clickable:!0,"thumb-size":"lg",thumb:t.charactersData[e.id].avatar,title:e.title3+" - "+e.title2,note:e.note,rightText:e.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDetail(e.id)}}})}))],2)],1),t.notices.length>0?i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"计算说明",type:"line",rightText:"影响伤害计算"}}),i("v-uni-view",t._l(t.notices,(function(t,e){return i("uni-list-item",{key:e,attrs:{title:t.title,rightText:t.note}})})),1)],1):t._e(),t.recharges.length>0?i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"充能要求",type:"line",rightText:"可能影响循环"}}),i("v-uni-view",t._l(t.recharges,(function(t,e){return i("uni-list-item",{key:e,attrs:{title:t.title,rightText:t.note}})})),1)],1):t._e(),t.others.length>0?i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"忽视计算",type:"line",rightText:"计算时会忽略"}}),i("v-uni-view",t._l(t.others,(function(t,e){return i("uni-list-item",{key:e,attrs:{title:t.title,rightText:t.note}})})),1)],1):t._e(),i("uni-card",{key:t.index,attrs:{padding:"0",spacing:"0",margin:t.margin}},[i("uni-section",{attrs:{title:"技能轴",type:"line",rightText:t.team.note}}),t._l(t.team.results,(function(e,a){return i("uni-list-item",{key:a,attrs:{clickable:!0,"thumb-size":"lg",thumb:t.charactersData[e.id].avatar,title:e.title,rightText:e.text},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAction(a)}}})}))],2),i("uni-card",{attrs:{margin:t.margin,padding:"0",spacing:"0"}},[i("uni-section",{attrs:{title:"计算说明",type:"line"}}),i("uni-list-item",{staticClass:"item-space",attrs:{title:"1、 z重击  s闪避 *N代表重复次数"}}),i("uni-list-item",{staticClass:"item-space",attrs:{title:"2、如果装备了和原作者不同的条件触发型武器或圣遗物，将会影响伤害的计算，原因是没有具体覆盖情况，因此将会忽略处理（会按照角色设置的选项算）"}}),i("uni-list-item",{staticClass:"item-space",attrs:{title:"3、原作者："+t.team.from.name},scopedSlots:t._u([{key:"footer",fn:function(){return[i("uni-link",{attrs:{color:"#007AFF",href:t.team.from.url,text:"链接"}})]},proxy:!0}],null,!1,163258857)})],1)],1),i("v-uni-view",{staticStyle:{height:"60px"}})],2)},r=[]},"38cf":function(t,e,i){var a=i("23e7"),n=i("1148");a({target:"String",proto:!0},{repeat:n})},"39b5":function(t,e,i){"use strict";var a=i("ffc2"),n=i.n(a);n.a},"5cb0":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3"),i("2ca0");var a={name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA:function(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created:function(){this._isH5=null},methods:{isMail:function(){return this.href.startsWith("mailto:")},isTel:function(){return this.href.startsWith("tel:")},openURL:function(){window.open(this.href)},makePhoneCall:function(t){uni.makePhoneCall({phoneNumber:t})}}};e.default=a},"65b2":function(t,e,i){"use strict";i.r(e);var a=i("5cb0"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"9aee":function(t,e,i){var a=i("0f83");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("18ab7965",a,!0,{sourceMap:!1,shadowMode:!1})},b099:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShowA?i("a",{staticClass:"uni-link",class:{"uni-link--withline":!0===t.showUnderLine||"true"===t.showUnderLine},style:{color:t.color,fontSize:t.fontSize+"px"},attrs:{href:t.href,download:t.download}},[t._t("default",[t._v(t._s(t.text))])],2):i("v-uni-text",{staticClass:"uni-link",class:{"uni-link--withline":!0===t.showUnderLine||"true"===t.showUnderLine},style:{color:t.color,fontSize:t.fontSize+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openURL.apply(void 0,arguments)}}},[t._t("default",[t._v(t._s(t.text))])],2)},n=[]},d7b4:function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getTeamData=function(e){var i=JSON.parse(JSON.stringify(e)),a={fire:0,rock:0,wind:0,ice:0,thunder:0,water:0},s=[],h={},v=[];for(var m in i.members){var g=i.members[m],p=(0,o.getPreset)(m);p.cNote?(g.title=p.cNote,g.note=p.eNote,g.title2=p.score,g.score=0,g.element=p.element,h[p.cId]=p,a[p.element]+=1):v.push(p)}if(i.presets=h,v.length>0)return t.log("needInit"),{needInit:!0,initPresets:v};var b={};for(var x in h){var k=h[x];if(k.effects){var w,y=(0,r.default)(k.effects);try{for(y.s();!(w=y.n()).done;){var S=w.value;b[S.id]=S}}catch(ut){y.e(ut)}finally{y.f()}}}a.fire>1&&s.push({id:"shuanghuo",title:"共鸣 - 双火",text:"攻击力提升25%"});a.ice>1&&(b.shuangbing={id:"shuangbing",title:"共鸣 - 双冰",text:"暴击率提升15%"});a.rock>1&&s.push({id:"shuangyan",title:"共鸣 - 双岩",text:"伤害提升15%,目标岩元素抗性降低15%"});a.ice>0&&a.thunder>0&&(b.chaodao={id:"chaodao",title:"效果 - 超导",text:"目标物理抗性降低40%"});i.score=0;var _,T=(0,r.default)(i.results);try{for(T.s();!(_=T.n()).done;){var C=_.value;C.score=0;var I,D=h[C.id],L=u.charactersData[C.id],P=L.cals[C.id],$=(0,r.default)(C.actions);try{for($.s();!(I=$.n()).done;){var N=I.value,O=[],z=JSON.parse(JSON.stringify(D));N.type?(z.school.reaction=N.type,N.text=f[N.type]):(z.school={reaction:-1},N.text=""),z.tIds=i.cIds;var F=d(z,N,s,b);if(F.buffTexts&&(O=F.buffTexts),F.wBuff&&O.unshift(F.wBuff),F.aBuff&&O.unshift(F.aBuff),N.skills){N.skillKey||(N.skillKey=N.skills[0][0]);var M=0;if(N.skillIndex)M=cSkills[N.skillIndex];else{var U=z["cSkills"];M="q"==N.skillKey?U[2]:"e"==N.skillKey?U[1]:U[0]}for(var j=0,A=i.members[C.id],B=0;B<N.skills.length;B++){var R=N.skills[B],E=A.skill[R][M];N.repeat?j+=E*N.repeat[B]:j+=E}var J={element:N.element,title:N.title,key:N.skillKey,level:j};if(N.stage){var K,q=(0,r.default)(N.stage);try{for(q.s();!(K=q.n()).done;){var H=K.value;if(z.cStage>=H.num)switch(H.type){case"skill":for(var W=0;W<H.skills.length;W++){var G=H.skills[W],Q=A.skill[G][M];J.level+=Q*H.repeat[W]}break;case"bonus":J.bonus=H.value;break;default:break}}}catch(ut){q.e(ut)}finally{q.f()}}if(N.baseAction){var V=N.baseAction,X=(0,n.default)({},h[V.id]);X.tIds=i.cIds;var Y=d(X,V,s,b),Z=X.cSkills[V.skillIndex],tt=i.members[V.id],et=tt.skill[V.skillKey][Z];J.baseItem={atk:Y.atk(),ratio:et*V.repeat}}F.skills.push(J),P.get(F),N.score=F.tScore,N.formula=F.formula,N.extraNote&&O.unshift(N.extraNote)}else{var it=(0,l.reactionDamage)(F,N.reaction);N.score=it*N.repeat[0],N.formula=N.repeat[0]+" * "+F.formulaR}O.length>0?N.note=O.join(" | "):N.note="无";var at=parseInt(N.score);C.score+=at,i.members[C.id].score+=at,N.text+=(1*N.score).toFixed(0)}}catch(ut){$.e(ut)}finally{$.f()}C.text=C.score.toFixed(0),i.score+=C.score}}catch(ut){T.e(ut)}finally{T.f()}for(var nt in i.members){var rt=i.members[nt],st=(rt.score/i.score*100).toFixed(0)+"%";rt.text=rt.score+" / "+st,rt.dps=(rt.score/i.time).toFixed(0)+" / S"}i.sText=i.score.toFixed(0);var ot=i.score/i.time;i.dps=ot.toFixed(0)+" / S";var ct=(ot/5e4*100).toFixed(0),lt=(0,c.getColor)(ct);return i.result.color=lt,i.result.score=ct,i};var n=a(i("5530")),r=a(i("b85c"));i("e9c4"),i("14d9"),i("3c65"),i("38cf"),i("e25e");var s=i("0ac6"),o=i("7117"),c=i("483a"),l=i("b0f6"),u=i("706f"),f=["无","蒸发 - ","融化 - "];function d(e,i,a,n){var o,c,l=[];if(i.buffs){var u,f=(0,r.default)(i.buffs);try{for(f.s();!(u=f.n()).done;){var d=u.value,h=n[d];h?l.push(h):t.log("不存在",d)}}catch(g){f.e(g)}finally{f.f()}}else i.buffs=[];if(i.aConfigs&&!e.aSets){var v=i.aConfigs[e.aIds[0]];v&&(o=v.indexs)}if(i.wConfigs){var m=i.wConfigs[e.wId];m&&(c=m.indexs)}return(0,s.buildTeamAttribute)(e,a,l,c,o)}}).call(this,i("5a52")["default"])},da0c:function(t,e,i){"use strict";i.r(e);var a=i("e705"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},dc1e:function(t,e,i){"use strict";i.r(e);var a=i("21e2"),n=i("da0c");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("01a0");var s=i("f0c5"),o=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"97cf0aca",null,!1,a["a"],void 0);e["default"]=o.exports},e705:function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9"),i("4e82");var n=a(i("b85c")),r=a(i("5530")),s=i("26cb"),o=i("a332"),c=i("d7b4"),l=i("706f"),u=i("7117"),f=a(i("2c31")),d={data:function(){return{names:{},colors:{fire:"#fadbd9",ice:"#d2f1f0",rock:"#fef2ced2",water:"#cce6ff",thunder:"#e1d7f0",wind:"#d7f0dbff"},margin:"0px 15px 30px",notices:[],recharges:[],others:[],needInit:!1,initPresets:[],charactersData:{},formulaText:"基础区 * 增伤 * 期望 * 防御 * 反应 * 抗性 * 倍率",color:"rgb(211,159,81)",score:"",members:[],showSequence:!1,switchChecked:[!1,!1,!1,!1],switchChecked2:[!1,!1,!1,!1],presets:[],team:{},index:0,showRecharges:!1,showTeamBuffs:[],value:["0"],preset:{},options:[{icon:"star",text:"收藏"},{icon:"color",text:" 预设",info:0},{icon:"vip",text:"词条",info:0},{icon:"fire",text:"数据",info:0},{icon:"staff",text:"队友",info:0}]}},computed:(0,r.default)({},(0,s.mapState)(["version","character"])),onUnload:function(){uni.$off("presetChanged")},onLoad:function(t){var e=o.Teams[t.teamId];if(e){this.Team=e,this.charactersData=l.charactersData;var i=this;uni.$on("presetChanged",(function(){i.$store.commit("recoverPreset"),i.initData(),i.$forceUpdate()})),i.initData()}else uni.reLaunch({url:"/pages/team/team"})},methods:{initData:function(){if(uni.showLoading({title:"正在计算,请稍后!"}),this.members=[],this.team=(0,c.getTeamData)(this.Team),t.log("计算！"),this.team.needInit)return this.needInit=this.team.needInit,this.initPresets=this.team.initPresets,void uni.hideLoading();for(var e in this.needInit=!1,this.notices=[],this.recharges=[],this.others=[],this.team.members){var i=this.team.members[e],a=uni.getStorageSync(i.id);i.title3=a.tResult.rightText,i.note=a.wNote+a.note;var r,s=(0,n.default)(i.requires);try{for(s.s();!(r=s.n()).done;){var o=r.value,l=f.default[a.cId];switch(o.type){case 0:if(o.value>a.recharge){o.title=l;var u="当前"+(100*a.recharge).toFixed(0)+"%";o.note=u+" / 推荐"+(100*o.value).toFixed(0)+"%",this.recharges.push(o)}break;case 1:o.value>a.cStage&&(o.title=l,o.note="低于"+o.value+"命",this.notices.push(o));break;case 2:o.value==a.cStage&&(o.title=l,o.note="不支持"+o.value+"命",this.others.push(o));break;case 3:o.value<=a.cStage&&(o.title=l+" - 命座说明",this.notices.push(o));break;default:break}}}catch(v){s.e(v)}finally{s.f()}this.members.push(i)}this.members.sort((function(t,e){return e.score-t.score}));for(var d=0;d<this.members.length;d++){var h=this.members[d];h.width=0==d?90:h.score/this.members[0].score*90}uni.hideLoading(),this.$store.commit("setTeam",this.team),uni.setNavigationBarTitle({title:this.team.sTitle})},onClick:function(t){switch(t.index){case 0:uni.navigateTo({url:"config/actions"});break;default:break}},switchChange2:function(t){var e=this.switchChecked2[t];this.switchChecked2[t]=!e||!e,this.$forceUpdate()},switchChange:function(t){var e=this.switchChecked[t];this.switchChecked[t]=!e||!e,this.$forceUpdate()},setIndex:function(t){this.index=t},switchSequence:function(t){this.showSequence=t.value},switchRecharges:function(t){this.showRecharges=t.value},change:function(e){t.log(e)},toInit:function(t){var e=this;uni.showLoading({title:"初始化中..",mask:!0}),setTimeout((function(){(0,u.startCalculate)(t,this.version),e.$store.dispatch("storePreset",t),e.initData(),uni.hideLoading()}),3e3)},toAction:function(t){uni.navigateTo({url:"./action?index="+t})},toDetail:function(t){var e=uni.getStorageSync(t);this.$store.commit("backupPreset"),this.$store.commit("setPreset",e),uni.navigateTo({url:"/package/pages/character/property?from=team"})}}};e.default=d}).call(this,i("5a52")["default"])},e993:function(t,e,i){"use strict";i.r(e);var a=i("b099"),n=i("65b2");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("39b5");var s=i("f0c5"),o=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"03b6d5de",null,!1,a["a"],void 0);e["default"]=o.exports},ebbe:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"\n.uni-link[data-v-03b6d5de]{cursor:pointer}\n.uni-link--withline[data-v-03b6d5de]{text-decoration:underline}",""]),t.exports=e},ffc2:function(t,e,i){var a=i("ebbe");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("09849fde",a,!0,{sourceMap:!1,shadowMode:!1})}}]);